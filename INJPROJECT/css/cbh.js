/* CallbackHunter. All rights reserved. */

var CBHCore=function(win,doc,loc,cur_script,CBHCoflict,na){function SD(a){function b(){if(1===arguments.length)this._date=new Date(arguments[0]),this._localDate=new Date(Number(this._date)+d);else{if(0===arguments.length)this._localDate=new Date;else{var a=Array.prototype.slice.call(arguments);a.unshift(null),this._localDate=new(Function.prototype.bind.apply(Date,a))}this._date=new Date(this._localDate-d)}}var c=a.timestamp,d=a.offset,e=a.threshold||6e5,f=a.widgetVersion||null;if(10===parseInt(f,10))return Date;if(void 0===d){if(!c||parseInt(c,10)<=0)return Date;d=Number(new Date)-parseInt(c,10)}if(Math.abs(d)<e)return Date;var g,h;return function(){var a=(new Date).getTimezoneOffset(),b=Math.floor(d/1e3/60);g=(a-b)%1440,h="GMT",h+=g<=0?"+":"-";var c=Math.abs(g),e=Math.floor(c/60);e<10&&(h+="0"),h+=e;var f=c%60;f<10&&(h+="0"),h+=f,h+=" (AREA 51)"}(),b._offset=d,["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","toDateString"].forEach(function(a){b.prototype[a]=function(){return this._localDate[a]()}}),["getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","toISOString","toLocaleString","toLocaleDateString","toLocaleTimeString","getTime","valueOf","toJSON"].forEach(function(a){b.prototype[a]=function(){return this._date[a]()}}),["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime"].forEach(function(a){b.prototype[a]=function(){return this._localDate[a].apply(this._localDate,arguments),this._date=new Date(this._localDate-d),this._date.valueOf()}}),["setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"].forEach(function(a){b.prototype[a]=function(){return this._date[a].apply(this._date,arguments),this._localDate=new Date(Number(this._date)+d),this._date.valueOf()}}),b.prototype.toUTCString=function(){return this._date.toUTCString().replace("UTC","GMT")},b.prototype.getTimezoneOffset=function(){return g},b.prototype.toTimeString=function(){return this._localDate.toTimeString().split(" ")[0]+" "+h},b.prototype.toString=function(){return this.toDateString()+" "+this.toTimeString()},b}function Sweety(){var a=function(a){return new b(a)},b=function(a){var b;"string"==typeof a&&a.length>0?b="<"===a.substr(0,1)?c.create(a):c.find(document,a):"object"===(void 0===a?"undefined":babelHelpers.typeof(a))&&null!==a&&(b=a),this.elements=[];var d=Object.prototype.toString.call(b);return b&&("[object HTMLCollection]"===d||"[object NodeList]"===d?this.elements=Array.prototype.slice.call(b):"[object Array]"===d?this.elements=b:"[SweetyElement]"===b.toString()?this.elements=b.elements:this.elements=[b]),this},c=a.fn={create:function(a){var b=document.createElement("div");return b.innerHTML=a,b.children},find:function(a,b){var c;switch(b.substr(0,1)){case".":c=a.getElementsByClassName(b.substr(1));break;case"#":c=a.querySelector?a.querySelector(b):a.getElementById(b.substr(1));break;case"@":c=a.getElementsByName(b.substr(1));break;default:c=a.getElementsByTagName(b)}return c},each:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c,a)},objEach:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},contains:function(a,b){return-1!==a.indexOf(b)},getClasses:function(a){return""===a.className?[]:a.className.split(/\s+/)},saveClasses:function(a,b){a.className=b.join(" ")},getStyles:function(a){var b=a.style.cssText.split(/;\s*/),c={};return this.each(b,function(a){var b=a.split(/:\s*/);2===b.length&&(c[b[0]]=b[1])}),c},saveStyles:function(a,b){var c=[];this.objEach(b,function(a,b){c.push(a+":"+b)}),a.style.cssText=c.join(";")}};return b.prototype={toArray:function(){return this.elements},findChild:function(b){return this.elements[0]?a(c.find(this.elements[0],b)):a()},findParent:function(b){if(!this.elements[0])return a();var d=this.elements[0];if(!b)return this.parent();if("."===b.substr(0,1))for(;(d=d.parentElement)&&!c.contains(c.getClasses(d),b.substr(1)););else for(;(d=d.parentElement)&&d.tagName.toUpperCase()!==b.toUpperCase(););return a(d)},parent:function(){return this.elements[0]?a(this.elements[0].parentElement):a()},forEach:function(a){return c.each(this.elements,a),this},getProp:function(a){if(this.elements[0])return this.elements[0][a]},setProp:function(a,b){var d={};return"object"===(void 0===a?"undefined":babelHelpers.typeof(a))?d=a:d[a]=b,this.forEach(function(a){c.objEach(d,function(b,c){a[b]=c})}),this},prop:function(a,b){return void 0!==b||"object"===(void 0===a?"undefined":babelHelpers.typeof(a))?this.setProp(a,b):this.getProp(a)},getAttr:function(a){return this.elements[0]?this.elements[0].getAttribute(a):null},setAttr:function(a,b){var d={};return"[object Object]"===a.toString()?d=a:d[a]=b,this.forEach(function(a){c.objEach(d,function(b,c){a.setAttribute(b,c)})}),this},removeAttr:function(a){var b=[];return"object"===(void 0===a?"undefined":babelHelpers.typeof(a))?b=a:b.push(a),this.forEach(function(a){c.each(b,function(b){a.removeAttribute(b)})}),this},hasAttr:function(a){return!!this.elements[0]&&this.elements[0].hasAttribute(a)},attr:function(a,b){return void 0!==b||"object"===(void 0===a?"undefined":babelHelpers.typeof(a))?(this.setAttr(a,b),this):this.getAttr(a)},val:function(a){var b=[],d=a;return this.elements[0]&&"SELECT"===this.elements[0].tagName&&this.elements[0].multiple?void 0===d?(this.findChild("option").forEach(function(a){a.selected&&b.push(a.value)}),b.length>0?b:null):("string"==typeof d&&(d=d.split(" ")),this.findChild("option").forEach(function(a){a.selected=c.contains(d,a.value)}),this):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"radio"===this.elements[0].type?void 0===d?(b=null,this.forEach(function(a){a.checked&&(b=a.value)}),b):(this.forEach(function(a){a.checked=a.value===d}),this):this.elements[0]&&"INPUT"===this.elements[0].tagName&&"checkbox"===this.elements[0].type?void 0===d?(b=[],this.forEach(function(a){a.checked&&b.push(a.value)}),b.length>0?b:null):("string"==typeof d&&(d=d.split(" ")),this.forEach(function(a){a.checked=c.contains(d,a.value)}),this):void 0!==this.prop("value")?this.prop("value",d):this.attr("value",d)},addClass:function(a){var b="string"==typeof a?a.split(/\s+/):a;return this.forEach(function(a){var d=c.getClasses(a);c.each(b,function(a){-1===d.indexOf(a)&&d.push(a)}),c.saveClasses(a,d)}),this},removeClass:function(a){var b="string"==typeof a?a.split(/\s+/):a;return this.forEach(function(a){var d=c.getClasses(a);c.each(b,function(a){var b=d.indexOf(a);-1!==b&&d.splice(b,1)}),c.saveClasses(a,d)}),this},hasClass:function(a){return!!this.elements[0]&&c.contains(c.getClasses(this.elements[0]),a)},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a),this},addStyle:function(a,b){return this.forEach(function(d){var e=c.getStyles(d);void 0!==b?e[a]=b:"object"===(void 0===a?"undefined":babelHelpers.typeof(a))&&c.objEach(a,function(a,b){e[a]=b}),c.saveStyles(d,e)}),this},removeStyle:function(a){var b="string"==typeof a?[a]:a;return this.forEach(function(a){var d=c.getStyles(a);c.each(b,function(a){delete d[a]}),c.saveStyles(a,d)}),this},css:function(a,b){return this.addStyle(a,b)},html:function(a){if(void 0!==a)return this.empty().forEach(function(b){b.innerHTML=a}),this;if(this.elements[0])return this.elements[0].innerHTML},empty:function(){return this.forEach(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)}),this},append:function(a){return this.elements[0]&&a?("[SweetyElement]"===a.toString()?c.each(a.elements,function(a){this.elements[0].appendChild(a)}.bind(this)):this.elements[0].appendChild(a),this):this},remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)}),this.elements=[]},on:function(a,b){var d="string"==typeof a?a.split(" "):a;return c.each(d,function(a){this.forEach(function(c){c.addEventListener(a,b,!1)})}.bind(this)),this},off:function(a,b){var d="string"==typeof a?a.split(" "):a;return c.each(d,function(a){this.forEach(function(c){c.removeEventListener(a,b,!1)})}.bind(this)),this},exists:function(){return 0!==this.elements.length},toString:function(){return"[SweetyElement]"}},c.each(arguments,function(a){"object"===(void 0===a?"undefined":babelHelpers.typeof(a))&&c.objEach(a,function(a,c){"function"==typeof c&&(b.prototype[a]=c)})}),a}function getList(){var a=doc.cookie.split(";"),b={};return a.forEach(function(a){var c=a.split("=");if(2===c.length){var d=decodeURIComponent(c[0].trim()),e=uriToUtf(c[1].trim());try{e=JSON.parse(e)}catch(a){}b[d]=e}}),b}function uriToUtf(a){var b="",c=0,d=void 0,e=void 0,f=a.split(/(%(?:D0|D1)%.{2})/);for(d=f.length;c<d;c++){try{e=decodeURIComponent(f[c])}catch(a){e=f[c]}b+=e}return b}function getExpireTime(a){var b=new Date;return b.setDate(b.getDate()+a),b.toUTCString()}function getQueuePrefix(){return[opt.storage_prefix,win.location.hostname].join("_")+"."+opt.api.queue_name}function processQueue(a){if(!cbh_ldr.db_params)return!1;var b=cbh_ldr.storage.get("call","session",getQueuePrefix());if(!cbh_ldr.helpers.isArray(b)||1!==b.length)return!1;var c=b.shift();if(c.phone&&!1===c.processed&&(new Date).getTime()-c.timestamp<=opt.api.ttl){var d=cbh_ldr.helpers.extend({phone:c.phone},c.data);return c.processed=!0,b.push(c),cbh_ldr.storage.save("call",b,"session",getQueuePrefix()),a(d)}}function toQueue(a){if(!a.phone)return!1;var b={phone:a.phone,timestamp:(new Date).getTime(),processed:!1,data:a},c=cbh_ldr.storage.get("call","session",getQueuePrefix())||[];return(!cbh_ldr.helpers.isArray(c)||!c.length)&&(!!(c=[b])&&(cbh_ldr.storage.save("call",c,"session",getQueuePrefix()),!0))}function insertIEVersion(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"!==(void 0===a?"undefined":babelHelpers.typeof(a))?a:cbh_ldr.helpers.extend(a,{is_ie:cbh_ldr.helpers.getIEVersion()||0})}function prepare_required_params(){var a=insertIEVersion();cbh_ldr.hunter_code?a.hcode=cbh_ldr.hunter_code:a.domain=cbh_ldr.user.domain,a.sid=cbh_ldr.user.session_id,a.url=cbh_ldr.user.url,a.version=cbh_ldr.version,a.timezone_offset=(new Date).getTimezoneOffset(),a.page_title=document.title.substr(0,150);var b=cbh_ldr.helpers.getExternalSetting("custom_page_title","string");return cbh_ldr.helpers.isNull(b)||(a.page_title=b),a.extension_mode=Number(cbh_ldr.extensionMode),cbh_ldr.lang.filter_id&&(a.filter_id=cbh_ldr.lang.filter_id),cbh_ldr.user.referrer&&(a.referer=cbh_ldr.user.referrer),cbh_ldr.user.entrance_page&&(a.entrance_page=cbh_ldr.user.entrance_page),cbh_ldr.user.custom_cookie&&(a.custom_cookie=encodeURIComponent(cbh_ldr.user.custom_cookie)),void 0===a.is_mobile&&(a.is_mobile=cbh_ldr.helpers.isMobile()?1:0),a}function getAllUrlParams(a){var b=a?a.split("?")[1]:window.location.search.slice(1),c={};if(!b)return c;b=b.split("#")[0];for(var d=b.split("&"),e=0;e<d.length;e++){var f,g=d[e].split("="),h=g[0].replace(/\[\d*\]/,function(a){return f=a.slice(1,-1),""}),i=void 0===g[1]||g[1];h=h.toLowerCase(),i=i.toLowerCase(),c[h]?("string"==typeof c[h]&&(c[h]=[c[h]]),void 0===f?c[h].push(i):c[h][f]=i):c[h]=i}return c}if(CBHCoflict)return CBHCore;var watchReadyState=["complete"];try{var curScriptParams=getAllUrlParams(cur_script.getAttribute("src"));curScriptParams&&curScriptParams.min_ready_state&&watchReadyState.push(curScriptParams.min_ready_state)}catch(a){}var tId=setInterval(function(){("complete"===doc.readyState||watchReadyState.length>1&&Array.prototype.indexOf&&-1!==watchReadyState.indexOf(doc.readyState))&&cbh_ldr.init("undefined"==typeof hunter_code?null:hunter_code)},15),define,module,StrongDate=Date,opt={};!function(){var a="cdn.callbackhunter.com";opt={static_domain:a,endpoint:"callbackhunter.com",endpoint_v7:"n.callbackhunter.com",endpoint_protocol:"https:",socketIOEndpoint:"https://n.callbackhunter.com",errorWebhookUrn:"/webhook/widget_error/",greetersJs:"/widgets/greeters/v1/public/greeters.min.js",versions:{v2:{desktop:{lang:"/widgets/v2/js/i18n/",stylesheets:["/widgets/v2/widget.min.css"],scripts:["/widgets/v2/widget.min.js"]},mobile:{lang:"/widgets/m1/js/i18n/",stylesheets:["/widgets/m1/widget.min.css"],scripts:["/widgets/m1/widget.min.js"]}},v3:{lang:"/widgets/v3/js/i18n/",stylesheets:["/widgets/v3/widget.min.css"],scripts:["/widgets/v3/widget.min.js"]},v5:{desktop:{lang:"/widgets/v5/js/i18n/",stylesheets:["/widgets/v5/widget.min.css"],scripts:["/widgets/v5/widget.min.js"]},mobile:{lang:"/widgets/m1/js/i18n/",stylesheets:["/widgets/m1/widget.min.css"],scripts:["/widgets/m1/widget.min.js"]}},v7:{desktop:{lang:"/widgets/v7/js/i18n/",stylesheets:["/widgets/v7/widget.min.css"],scripts:["/widgets/v7/widget.min.js"]},mobile:{lang:"/widgets/m8/js/i18n/",stylesheets:["/widgets/m8/widget.min.css"],scripts:["/widgets/m8/widget.min.js"],disableBanner:!0,masked_config:{pathToList:"https://"+a+"/widgets/m8/js/masks/"}}},v8:{desktop:{lang:"/widgets/v8/js/i18n/",stylesheets:["/widgets/v8/widget.min.css"],scripts:["/widgets/v8/widget.min.js"],masked_config:{pathToList:"https://"+a+"/widgets/v8/js/masks/"}},mobile:{lang:"/widgets/m8/js/i18n/",stylesheets:["/widgets/m8/widget.min.css"],scripts:["/widgets/m8/widget.min.js"],disableBanner:!0,masked_config:{pathToList:"https://"+a+"/widgets/m8/js/masks/"}}},v9:{desktop:{lang:"/widgets/v9/js/i18n/",stylesheets:["/widgets/v9/widget.min.css"],scripts:["/widgets/v9/widget.min.js"],masked_config:{pathToList:"https://"+a+"/widgets/v9/js/masks/"}},mobile:{lang:"/widgets/m8/js/i18n/",stylesheets:["/widgets/m8/widget.min.css"],scripts:["/widgets/m8/widget.min.js"],disableBanner:!0,masked_config:{pathToList:"https://"+a+"/widgets/m8/js/masks/"}}},v10:{desktop:{lang:"/widgets/v10/js/i18n/",stylesheets:["/widgets/v10/widget.min.css?v=1.4.13"],scripts:["/widgets/v10/widget.min.js?v=1.4.13"],masked_config:{pathToList:"https://"+a+"/widgets/v10/js/masks/"}},mobile:{lang:"/widgets/m8/js/i18n/",stylesheets:["/widgets/m8/widget.min.css"],scripts:["/widgets/m8/widget.min.js"],disableBanner:!0,masked_config:{pathToList:"https://"+a+"/widgets/m8/js/masks/"}}},m1:{lang:"/widgets/m1/js/i18n/",stylesheets:["/widgets/m1/widget.min.css"],scripts:["/widgets/m1/widget.min.js"]}},cbh_ga_id:"UA-50011917-2",cbh_ga_id_v7:"UA-50011917-8",use_storage:!0,storage_cache_lifetime:60,dev_mode:!1,debug_scope:null,telemetry_disabled:!1,telemetry_urn:"/hunter/telemetry/",telemetry_send_interval:12,use_dev_language:!1,use_minimized_css:!0},opt.masked_config={pathToList:"https://"+a+"/widgets/masks/",prefix:"instId_",lang:"ru",country:"ru",one_country:!1,country_binding:!1,first_countries:["ru"],exceptions:{ua:{exceptions:{3800:"380"}}},initial_focus:!1,select_range:!0,onToggleList:null,onShowList:null,onHideList:null,onSend:null,onValueChanged:null,onValidationError:null,onShowInformation:null,show_validation_errors:!1,show_phone_information:!1,i18n:{ru:{errors:{phone_is_empty:"Телефон не заполнен, заполните все символы",phone_not_exists:"Телефон введен не верно или не существует"}},en:{errors:{phone_is_empty:"Phone is empty, fill in all the characters",phone_not_exists:"Phone is entered incorrectly or does not exist"}},fr:{errors:{phone_is_empty:"Numéro de téléphone est vide, remplir tous les caractères",phone_not_exists:"Numéro de téléphone saisi est incorrect ou n'existe pas"}}},popover:{prefix_id:"masked_popover",prefix_class:"Masked_popover"}},opt.storage_prefix="cbh_db",opt.api={queue_name:"api_queue",ttl:9e5}}();var babelHelpers={};babelHelpers.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},babelHelpers.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},babelHelpers.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),babelHelpers.extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},babelHelpers.inherits=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},babelHelpers.possibleConstructorReturn=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b};var async={series:function(a,b){this.eachSeries(a,function(a,b,c){a(c)},b)},eachSeries:function(a,b,c){var d=-1,e=c||function(){};!function c(f){return f?e(f):++d>=a.length?e():void setTimeout(function(){b(a[d],d,c)},0)}()}};!function(a){if("object"===("undefined"==typeof exports?"undefined":babelHelpers.typeof(exports))&&void 0!==module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Babelfish=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return Object.prototype.toString.call(a)}function e(a){return"[object String]"===d(a)}function f(a){return!isNaN(a)&&isFinite(a)}function g(a){return!0===a||!1===a}function h(a){return"[object Function]"===d(a)}function i(a){return"[object Object]"===d(a)}function j(a,b,c){if(null!==a)if(u&&a.forEach===u)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;d<e;d+=1)b.call(c,a[d],d,a);else for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&b.call(c,a[f],f,a)}function k(a){var b=1,c=arguments,d=c.length;return String(a).replace(v,function(a){if("%%"===a)return"%";if(b>=d)return a;switch(a){case"%s":return String(c[b++]);case"%d":return Number(c[b++]);case"%j":return JSON.stringify(c[b++]);default:return a}})}function l(a){var b={};return j(a||{},function(a,c){if(a&&"object"===(void 0===a?"undefined":babelHelpers.typeof(a)))return void j(l(a),function(a,d){b[c+"."+d]=a});b[c]=a}),b}function m(a,b){return a+x+b}function n(a,b,c){var d=m(b,c),e=a._storage;if(e.hasOwnProperty(d))return d;if(b===a._defaultLocale)return null;var f=a._fallbacks_cache;if(f.hasOwnProperty(d))return f[d];for(var g,h=a._fallbacks[b]||[a._defaultLocale],i=0,j=h.length;i<j;i++)if(g=m(h[i],c),e.hasOwnProperty(g))return f[d]=g,f[d];return f[d]=null,null}function o(a,b,c){var d=s.indexOf(a,b);return-1===d?k('[pluralizer for "%s" locale not found]',a):void 0===c[d]?k('[plural form %d ("%s") not found in translation]',d,s.forms(a)[d]):c[d]}function p(a){if(!(this instanceof p))return new p(a);this._defaultLocale=a?String(a):w,this._fallbacks={},this._fallbacks_cache={},this._storage={},this._plurals_cache={}}function q(a,b,c){var d,e,f,g,h,i;return y.test(b)?(d=r.parse(b),1===d.length&&"literal"===d[0].type?d[0].text:(a._plurals_cache[c]||(a._plurals_cache[c]=new p(c)),i=a._plurals_cache[c],e=[],e.push(['var str = "", strict, strict_exec, forms, forms_exec, plrl, cache, loc, loc_plzr, anchor;']),e.push("params = flatten(params);"),j(d,function(a){if("literal"===a.type)return void e.push(k("str += %j;",a.text));if("variable"===a.type)return f=a.anchor,void e.push(k('str += ("undefined" === typeof (params[%j])) ? "[missed variable: %s]" : params[%j];',f,f,f));if("plural"!==a.type)throw new Error("Unknown node type");f=a.anchor,g={},j(a.strict,function(b,d){var e=r.parse(b);if(1===e.length&&"literal"===e[0].type)return g[d]=!1,void(a.strict[d]=e[0].text);g[d]=!0,i.hasPhrase(c,b,!0)||i.addPhrase(c,b,b)}),h={},j(a.forms,function(b,d){var e,f=r.parse(b);if(1===f.length&&"literal"===f[0].type)return e=f[0].text,a.forms[d]=e,void(h[e]=!1);h[b]=!0,i.hasPhrase(c,b,!0)||i.addPhrase(c,b,b)}),e.push(k("loc = %j;",c)),e.push(k("loc_plzr = %j;",c.split(/[-_]/)[0])),e.push(k("anchor = params[%j];",f)),e.push(k("cache = this._plurals_cache[loc];")),e.push(k("strict = %j;",a.strict)),e.push(k("strict_exec = %j;",g)),e.push(k("forms = %j;",a.forms)),e.push(k("forms_exec = %j;",h)),e.push("if (+(anchor) != anchor) {"),e.push(k('  str += "[invalid plurals amount: %s(" + anchor + ")]";',f)),e.push("} else {"),e.push("  if (strict[anchor] !== undefined) {"),e.push("    plrl = strict[anchor];"),e.push("    str += strict_exec[anchor] ? cache.t(loc, plrl, params) : plrl;"),e.push("  } else {"),e.push("    plrl = pluralizer(loc_plzr, +anchor, forms);"),e.push("    str += forms_exec[plrl] ? cache.t(loc, plrl, params) : plrl;"),e.push("  }"),e.push("}")}),e.push("return str;"),new Function("params","flatten","pluralizer",e.join("\n")))):b}var r=a("./parser"),s=a("plurals-cldr"),t=Array.isArray||function(a){return"[object Array]"===d(a)},u=Array.prototype.forEach,v=/%[sdj%]/g,w="en",x="#@$";p.prototype.addPhrase=function(a,b,c,d){var h,k=this;if(g(d))h=d?1/0:0;else if(f(d)){if((h=Math.floor(d))<0)throw new TypeError("Invalid flatten level (should be >= 0).")}else h=1/0;if(i(c)&&h>0)return void j(c,function(c,d){k.addPhrase(a,b+"."+d,c,h-1)});if(e(c))this._storage[m(a,b)]={translation:c,locale:a,raw:!1};else{if(!(t(c)||f(c)||g(c)||0===h&&i(c)))throw new TypeError("Invalid translation - [String|Object|Array|Number|Boolean] expected.");this._storage[m(a,b)]={translation:c,locale:a,raw:!0}}k._fallbacks_cache={}},p.prototype.setFallback=function(a,b){var c=this._defaultLocale;if(c===a)throw new Error("Default locale can't have fallbacks");var d=t(b)?b.slice():[b];d[d.length-1]!==c&&d.push(c),this._fallbacks[a]=d,this._fallbacks_cache={}};var y=/#\{|\(\(|\\\\/;p.prototype.translate=function(a,b,c){var d,g=n(this,a,b);return g?(d=this._storage[g],d.raw?d.translation:(d.hasOwnProperty("compiled")||(d.compiled=q(this,d.translation,d.locale)),h(d.compiled)?((f(c)||e(c))&&(c={count:c,value:c}),d.compiled.call(this,c,l,o)):d.compiled)):a+": No translation for ["+b+"]"},p.prototype.hasPhrase=function(a,b,c){return c?this._storage.hasOwnProperty(m(a,b)):!!n(this,a,b)},p.prototype.getLocale=function(a,b,c){if(c)return this._storage.hasOwnProperty(m(a,b))?a:null;var d=n(this,a,b);return d?d.split(x,2)[0]:null},p.prototype.t=p.prototype.translate,p.prototype.stringify=function(a){var b=this,c={};j(this._storage,function(a,b){c[b.split(x)[1]]=!0});var d={};j(c,function(c,e){var f=n(b,a,e);if(f){var g=b._storage[f].locale;d[g]||(d[g]={}),d[g][e]=b._storage[f].translation}});var e={fallback:{},locales:d},f=(b._fallbacks[a]||[]).slice(0,-1);return f.length&&(e.fallback[a]=f),JSON.stringify(e)},p.prototype.load=function(a){var b=this;e(a)&&(a=JSON.parse(a)),j(a.locales,function(a,c){j(a,function(a,d){b.addPhrase(c,d,a,0)})}),j(a.fallback,function(a,c){b.setFallback(c,a)})},b.exports=p},{"./parser":2,"plurals-cldr":3}],2:[function(a,b,c){b.exports=function(){function a(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function b(b){function c(){return b.substring(ra,qa)}function d(a){return sa!==a&&(sa>a&&(sa=0,ta={line:1,column:1,seenCR:!1}),function(a,c,d){var e,f;for(e=c;e<d;e++)f=b.charAt(e),"\n"===f?(a.seenCR||a.line++,a.column=1,a.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a.line++,a.column=1,a.seenCR=!0):(a.column++,a.seenCR=!1)}(ta,sa,a),sa=a),ta}function e(a){qa<ua||(qa>ua&&(ua=qa,va=[]),va.push(a))}function f(c,e,f){var g=d(f),h=f<b.length?b.charAt(f):null;return null!==e&&function(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}(e),new a(null!==c?c:function(a,b){var c,d,e,f=new Array(a.length);for(e=0;e<a.length;e++)f[e]=a[e].description;return c=a.length>1?f.slice(0,-1).join(", ")+" or "+f[a.length-1]:f[0],d=b?'"'+function(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}(b)+'"':"end of input","Expected "+c+" but "+d+" found."}(e,h),e,h,f,g.line,g.column)}function g(){var a,b;for(a=[],b=p(),b===v&&(b=h())===v&&(b=m());b!==v;)a.push(b),(b=p())===v&&(b=h())===v&&(b=m());return a}function h(){var a,c,d,f,g;return a=qa,b.substr(qa,2)===z?(c=z,qa+=2):(c=v,0===wa&&e(A)),c!==v?(d=i(),d!==v?(b.substr(qa,2)===B?(f=B,qa+=2):(f=v,0===wa&&e(C)),f!==v?(g=l(),g===v&&(g=D),g!==v?(ra=a,c=E(d,g),a=c):(qa=a,a=y)):(qa=a,a=y)):(qa=a,a=y)):(qa=a,a=y),a}function i(){var a,c,d,f;return a=qa,c=j(),c!==v?(124===b.charCodeAt(qa)?(d=F,qa++):(d=v,0===wa&&e(G)),d!==v?(f=i(),f!==v?(ra=a,c=H(c,f),a=c):(qa=a,a=y)):(qa=a,a=y)):(qa=a,a=y),a===v&&(a=qa,c=j(),c!==v&&(ra=a,c=I(c)),a=c),a}function j(){var a,c,d,f,g,h;if(a=qa,61===b.charCodeAt(qa)?(c=J,qa++):(c=v,0===wa&&e(K)),c!==v){if(d=[],L.test(b.charAt(qa))?(f=b.charAt(qa),qa++):(f=v,0===wa&&e(M)),f!==v)for(;f!==v;)d.push(f),L.test(b.charAt(qa))?(f=b.charAt(qa),qa++):(f=v,0===wa&&e(M));else d=y;if(d!==v)if(32===b.charCodeAt(qa)?(f=N,qa++):(f=v,0===wa&&e(O)),f===v&&(f=D),f!==v){if(g=[],(h=k())!==v)for(;h!==v;)g.push(h),h=k();else g=y;g!==v?(ra=a,c=P(d,g),a=c):(qa=a,a=y)}else qa=a,a=y;else qa=a,a=y}else qa=a,a=y;if(a===v){if(a=qa,c=[],(d=k())!==v)for(;d!==v;)c.push(d),d=k();else c=y;c!==v&&(ra=a,c=Q()),a=c}return a}function k(){var a,c,d;return a=qa,92===b.charCodeAt(qa)?(c=R,qa++):(c=v,0===wa&&e(S)),c!==v?(T.test(b.charAt(qa))?(d=b.charAt(qa),qa++):(d=v,0===wa&&e(U)),d!==v?(ra=a,c=V(d),a=c):(qa=a,a=y)):(qa=a,a=y),a===v&&(a=qa,c=qa,wa++,124===b.charCodeAt(qa)?(d=F,qa++):(d=v,0===wa&&e(G)),d===v&&(b.substr(qa,2)===B?(d=B,qa+=2):(d=v,0===wa&&e(C))),wa--,d===v?c=W:(qa=c,c=y),c!==v?(b.length>qa?(d=b.charAt(qa),qa++):(d=v,0===wa&&e(X)),d!==v?(ra=a,c=Y(),a=c):(qa=a,a=y)):(qa=a,a=y)),a}function l(){var a,c,d;return a=qa,58===b.charCodeAt(qa)?(c=Z,qa++):(c=v,0===wa&&e($)),c!==v?(d=n(),d!==v?(ra=a,c=_(d),a=c):(qa=a,a=y)):(qa=a,a=y),a}function m(){var a,c,d,f;return a=qa,b.substr(qa,2)===aa?(c=aa,qa+=2):(c=v,0===wa&&e(ba)),c!==v?(d=n(),d!==v?(125===b.charCodeAt(qa)?(f=ca,qa++):(f=v,0===wa&&e(da)),f!==v?(ra=a,c=ea(d),a=c):(qa=a,a=y)):(qa=a,a=y)):(qa=a,a=y),a}function n(){var a,c,d,f,g;if(a=qa,(c=o())!==v)if(46===b.charCodeAt(qa)?(d=fa,qa++):(d=v,0===wa&&e(ga)),d!==v){if(f=[],(g=n())!==v)for(;g!==v;)f.push(g),g=n();else f=y;f!==v?(ra=a,c=ha(),a=c):(qa=a,a=y)}else qa=a,a=y;else qa=a,a=y;return a===v&&(a=o()),a}function o(){var a,c,d,f;if(a=qa,ia.test(b.charAt(qa))?(c=b.charAt(qa),qa++):(c=v,0===wa&&e(ja)),c!==v){for(d=[],ka.test(b.charAt(qa))?(f=b.charAt(qa),qa++):(f=v,0===wa&&e(la));f!==v;)d.push(f),ka.test(b.charAt(qa))?(f=b.charAt(qa),qa++):(f=v,0===wa&&e(la));d!==v?(ra=a,c=Y(),a=c):(qa=a,a=y)}else qa=a,a=y;return a}function p(){var a,b,c,d,e;if(a=qa,b=[],c=qa,d=qa,wa++,e=h(),e===v&&(e=m()),wa--,e===v?d=W:(qa=d,d=y),d!==v?(e=q(),e!==v?(ra=c,d=ma(e),c=d):(qa=c,c=y)):(qa=c,c=y),c!==v)for(;c!==v;)b.push(c),c=qa,d=qa,wa++,e=h(),e===v&&(e=m()),wa--,e===v?d=W:(qa=d,d=y),d!==v?(e=q(),e!==v?(ra=c,d=ma(e),c=d):(qa=c,c=y)):(qa=c,c=y);else b=y;return b!==v&&(ra=a,b=na(b)),a=b}function q(){var a,c,d;return a=qa,92===b.charCodeAt(qa)?(c=R,qa++):(c=v,0===wa&&e(S)),c!==v?(oa.test(b.charAt(qa))?(d=b.charAt(qa),qa++):(d=v,0===wa&&e(pa)),d!==v?(ra=a,c=V(d),a=c):(qa=a,a=y)):(qa=a,a=y),a===v&&(b.length>qa?(a=b.charAt(qa),qa++):(a=v,0===wa&&e(X))),a}function r(a){for(var b=[],c=0;c<a.length;c++)void 0===a[c].strict&&b.push(a[c].text);return b}function s(a){for(var b={},c=0;c<a.length;c++)void 0!==a[c].strict&&(b[a[c].strict]=a[c].text);return b}var t,u=arguments.length>1?arguments[1]:{},v={},w={start:g},x=g,y=v,z="((",A={type:"literal",value:"((",description:'"(("'},B="))",C={type:"literal",value:"))",description:'"))"'},D=null,E=function(a,b){return{type:"plural",forms:r(a),strict:s(a),anchor:b||"count"}},F="|",G={type:"literal",value:"|",description:'"|"'},H=function(a,b){return[a].concat(b)},I=function(a){return[a]},J="=",K={type:"literal",value:"=",description:'"="'},L=/^[0-9]/,M={type:"class",value:"[0-9]",description:"[0-9]"},N=" ",O={type:"literal",value:" ",description:'" "'},P=function(a,b){return{strict:a.join(""),text:b.join("")}},Q=function(){return{text:c()}},R="\\",S={type:"literal",value:"\\",description:'"\\\\"'},T=/^[\\|)(]/,U={type:"class",value:"[\\\\|)(]",description:"[\\\\|)(]"},V=function(a){return a},W=void 0,X={type:"any",description:"any character"},Y=function(){return c()},Z=":",$={type:"literal",value:":",description:'":"'},_=function(a){return a},aa="#{",ba={type:"literal",value:"#{",description:'"#{"'},ca="}",da={type:"literal",value:"}",description:'"}"'},ea=function(a){return{type:"variable",anchor:a}},fa=".",ga={type:"literal",value:".",description:'"."'},ha=function(){return c()},ia=/^[a-zA-Z_$]/,ja={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},ka=/^[a-zA-Z0-9_$]/,la={type:"class",value:"[a-zA-Z0-9_$]",description:"[a-zA-Z0-9_$]"},ma=function(a){return a},na=function(a){return{type:"literal",text:a.join("")}},oa=/^[\\#()|]/,pa={type:"class",value:"[\\\\#()|]",description:"[\\\\#()|]"},qa=0,ra=0,sa=0,ta={line:1,column:1,seenCR:!1},ua=0,va=[],wa=0;if("startRule"in u){if(!(u.startRule in w))throw new Error("Can't start parsing from rule \""+u.startRule+'".');x=w[u.startRule]}if((t=x())!==v&&qa===b.length)return t;throw t!==v&&qa<b.length&&e({type:"end",description:"end of input"}),f(null,va,ua)}return function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}(a,Error),{SyntaxError:a,parse:b}}()},{}],3:[function(a,b,c){"use strict";function d(a){var b;return o[a]?a:(b=a.toLowerCase().replace("_","-"),o[b]?b:(b=b.split("-")[0],o[b]?b:null))}function e(a){var b=d(a);return o[b]?o[b].c:null}function f(a,b){var c=d(a);if(!c)return-1;if(!o[c].cFn)return 0;var e=String(b),f=e.indexOf(".")<0?"":e.split(".")[1],g=f.length,h=+b,i=+e.split(".")[0],j=0===f.length?0:+f.replace(/0+$/,"");return o[c].cFn(h,i,g,+f,j)}function g(a,b){var c=d(a);return c?o[c].c[f(c,b)]:null}function h(a){var b=d(a);return o[b]?o[b].o:null}function i(a,b){var c=d(a);if(!c)return-1;if(!o[c].oFn)return 0;var e=String(b),f=e.indexOf(".")<0?"":e.split(".")[1],g=f.length,h=+b,i=+e.split(".")[0],j=0===f.length?0:+f.replace(/0+$/,"");return o[c].oFn(h,i,g,+f,j)}function j(a,b){var c=d(a);return o[c]?o[c].o[i(c,b)]:null}function k(a){return p[a]}function l(a,b){var c;for(b.c=b.c?b.c.map(k):["other"],b.o=b.o?b.o.map(k):["other"],c=0;c<a.length;c++)o[a[c]]=b}function m(a,b,c){return a<=c&&c<=b&&c%1==0}function n(a,b){return a.indexOf(b)>=0}var o={};b.exports=g,b.exports.indexOf=f,b.exports.forms=e,b.exports.ordinal=j,b.exports.ordinal.indexOf=i,b.exports.ordinal.forms=h;var p=["zero","one","two","few","many","other"];l(["af","asa","bem","bez","bg","brx","cgg","chr","ckb","dv","ee","el","eo","es","eu","fo","fur","gsw","ha","haw","jgo","jmc","kaj","kcg","kkj","kl","ks","ksb","ku","ky","lb","lg","mas","mgo","ml","mn","nah","nb","nd","nn","nnh","no","nr","ny","nyn","om","or","os","pap","ps","rm","rof","rwk","saq","seh","sn","so","ss","ssy","st","syr","ta","te","teo","tig","tk","tn","tr","ts","ug","uz","ve","vo","vun","wae","xh","xog"],{c:[1,5],cFn:function(a){return 1===a?0:1}}),
l(["ak","bh","guw","ln","mg","nso","pa","ti","wa"],{c:[1,5],cFn:function(a){return m(0,1,a)?0:1}}),l(["am","fa","kn","zu"],{c:[1,5],cFn:function(a,b){return 0===b||1===a?0:1}}),l(["ar"],{c:[0,1,2,3,4,5],cFn:function(a){var b=a%100;return 0===a?0:1===a?1:2===a?2:m(3,10,b)?3:m(11,99,b)?4:5}}),l(["ast","de","et","fi","fy","gl","ji","nl","sw","ur","yi"],{c:[1,5],cFn:function(a,b,c){return 1===b&&0===c?0:1}}),l(["az"],{c:[1,5],cFn:function(a){return 1===a?0:1},o:[1,3,4,5],oFn:function(a,b){var c=b%10,d=b%100,e=b%1e3;return n([1,2,5,7,8],c)||n([20,50,70,80],d)?0:n([3,4],c)||n([100,200,300,400,500,600,700,800,900],e)?1:0===b||6===c||n([40,60,90],d)?2:3}}),l(["be"],{c:[1,3,4,5],cFn:function(a){var b=a%10,c=a%100;return 1===b&&11!==c?0:m(2,4,b)&&!m(12,14,c)?1:0===b||m(5,9,b)||m(11,14,c)?2:3}}),l(["bm","bo","dz","id","ig","ii","in","ja","jbo","jv","jw","kde","kea","km","ko","lkt","my","nqo","root","sah","ses","sg","th","to","wo","yo","zh"],{}),l(["bn"],{c:[1,5],cFn:function(a,b){return 0===b||1===a?0:1},o:[1,2,3,4,5],oFn:function(a){return n([1,5,7,8,9,10],a)?0:n([2,3],a)?1:4===a?2:6===a?3:4}}),l(["br"],{c:[1,2,3,4,5],cFn:function(a){var b=a%10,c=a%100,d=a%1e6;return 1!==b||n([11,71,91],c)?2!==b||n([12,72,92],c)?!m(3,4,b)&&9!==b||m(10,19,c)||m(70,79,c)||m(90,99,c)?0!==a&&0===d?3:4:2:1:0}}),l(["bs","hr","sh","sr"],{c:[1,3,5],cFn:function(a,b,c,d){var e=b%10,f=b%100,g=d%10,h=d%100;return 0===c&&1===e&&11!==f||1===g&&11!==h?0:0===c&&m(2,4,e)&&!m(12,14,f)||m(2,4,g)&&!m(12,14,h)?1:2}}),l(["ca"],{c:[1,5],cFn:function(a,b,c){return 1===b&&0===c?0:1},o:[1,2,3,5],oFn:function(a){return n([1,3],a)?0:2===a?1:4===a?2:3}}),l(["cs","sk"],{c:[1,3,4,5],cFn:function(a,b,c){return 1===b&&0===c?0:m(2,4,b)&&0===c?1:0!==c?2:3}}),l(["cy"],{c:[0,1,2,3,4,5],cFn:function(a){return 0===a?0:1===a?1:2===a?2:3===a?3:6===a?4:5},o:[0,1,2,3,4,5],oFn:function(a){return n([0,7,8,9],a)?0:1===a?1:2===a?2:n([3,4],a)?3:n([5,6],a)?4:5}}),l(["da"],{c:[1,5],cFn:function(a,b,c,d,e){return 1===a||0!==e&&n([0,1],b)?0:1}}),l(["dsb","hsb"],{c:[1,2,3,5],cFn:function(a,b,c,d){var e=b%100,f=d%100;return 0===c&&1===e||1===f?0:0===c&&2===e||2===f?1:0===c&&m(3,4,e)||m(3,4,f)?2:3}}),l(["en"],{c:[1,5],cFn:function(a,b,c){return 1===b&&0===c?0:1},o:[1,2,3,5],oFn:function(a){var b=a%10,c=a%100;return 1===b&&11!==c?0:2===b&&12!==c?1:3===b&&13!==c?2:3}}),l(["ff","kab"],{c:[1,5],cFn:function(a,b){return n([0,1],b)?0:1}}),l(["fil","tl"],{c:[1,5],cFn:function(a,b,c,d){var e=b%10,f=d%10;return 0===c&&n([1,2,3],b)||0===c&&!n([4,6,9],e)||0!==c&&!n([4,6,9],f)?0:1},o:[1,5],oFn:function(a){return 1===a?0:1}}),l(["fr","hy"],{c:[1,5],cFn:function(a,b){return n([0,1],b)?0:1},o:[1,5],oFn:function(a){return 1===a?0:1}}),l(["ga"],{c:[1,2,3,4,5],cFn:function(a){return 1===a?0:2===a?1:m(3,6,a)?2:m(7,10,a)?3:4}}),l(["gd"],{c:[1,2,3,5],cFn:function(a){return n([1,11],a)?0:n([2,12],a)?1:m(3,10,a)||m(13,19,a)?2:3}}),l(["gu","hi"],{c:[1,5],cFn:function(a,b){return 0===b||1===a?0:1},o:[1,2,3,4,5],oFn:function(a){return 1===a?0:n([2,3],a)?1:4===a?2:6===a?3:4}}),l(["gv"],{c:[1,2,3,4,5],cFn:function(a,b,c){var d=b%10,e=b%100;return 0===c&&1===d?0:0===c&&2===d?1:0===c&&n([0,20,40,60,80],e)?2:0!==c?3:4}}),l(["he","iw"],{c:[1,2,4,5],cFn:function(a,b,c){var d=a%10;return 1===b&&0===c?0:2===b&&0===c?1:0!==c||m(0,10,a)||0!==d?3:2}}),l(["hu"],{c:[1,5],cFn:function(a){return 1===a?0:1},o:[1,5],oFn:function(a){return n([1,5],a)?0:1}}),l(["is"],{c:[1,5],cFn:function(a,b,c,d,e){var f=b%10,g=b%100;return 0===e&&1===f&&11!==g||0!==e?0:1}}),l(["it"],{c:[1,5],cFn:function(a,b,c){return 1===b&&0===c?0:1},o:[4,5],oFn:function(a){return n([11,8,80,800],a)?0:1}}),l(["iu","kw","naq","se","sma","smi","smj","smn","sms"],{c:[1,2,5],cFn:function(a){return 1===a?0:2===a?1:2}}),l(["ka"],{c:[1,5],cFn:function(a){return 1===a?0:1},o:[1,4,5],oFn:function(a,b){var c=b%100;return 1===b?0:0===b||m(2,20,c)||40===c||60===c||80===c?1:2}}),l(["kk"],{c:[1,5],cFn:function(a){return 1===a?0:1},o:[4,5],oFn:function(a){var b=a%10;return 6===b||9===b||0===b&&0!==a?0:1}}),l(["ksh"],{c:[0,1,5],cFn:function(a){return 0===a?0:1===a?1:2}}),l(["lag"],{c:[0,1,5],cFn:function(a,b){return 0===a?0:n([0,1],b)&&0!==a?1:2}}),l(["lo","ms","vi"],{o:[1,5],oFn:function(a){return 1===a?0:1}}),l(["lt"],{c:[1,3,4,5],cFn:function(a,b,c,d){var e=a%10,f=a%100;return 1!==e||m(11,19,f)?m(2,9,e)&&!m(11,19,f)?1:0!==d?2:3:0}}),l(["lv","prg"],{c:[0,1,5],cFn:function(a,b,c,d){var e=a%10,f=a%100,g=d%100,h=d%10;return 0===e||m(11,19,f)||2===c&&m(11,19,g)?0:1===e&&11!==f||2===c&&1===h&&11!==g||2!==c&&1===h?1:2}}),l(["mk"],{c:[1,5],cFn:function(a,b,c,d){var e=b%10,f=d%10;return 0===c&&1===e||1===f?0:1},o:[1,2,4,5],oFn:function(a,b){var c=b%10,d=b%100;return 1===c&&11!==d?0:2===c&&12!==d?1:n([7,8],c)&&!n([17,18],d)?2:3}}),l(["mo","ro"],{c:[1,3,5],cFn:function(a,b,c){var d=a%100;return 1===b&&0===c?0:0!==c||0===a||1!==a&&m(1,19,d)?1:2},o:[1,5],oFn:function(a){return 1===a?0:1}}),l(["mr"],{c:[1,5],cFn:function(a,b){return 0===b||1===a?0:1},o:[1,2,3,5],oFn:function(a){return 1===a?0:n([2,3],a)?1:4===a?2:3}}),l(["mt"],{c:[1,3,4,5],cFn:function(a){var b=a%100;return 1===a?0:0===a||m(2,10,b)?1:m(11,19,b)?2:3}}),l(["ne"],{c:[1,5],cFn:function(a){return 1===a?0:1},o:[1,5],oFn:function(a){return m(1,4,a)?0:1}}),l(["pl"],{c:[1,3,4,5],cFn:function(a,b,c){var d=b%10,e=b%100;return 1===b&&0===c?0:0===c&&m(2,4,d)&&!m(12,14,e)?1:0===c&&1!==b&&m(0,1,d)||0===c&&m(5,9,d)||0===c&&m(12,14,e)?2:3}}),l(["pt"],{c:[1,5],cFn:function(a){return m(0,2,a)&&2!==a?0:1}}),l(["pt-pt"],{c:[1,5],cFn:function(a,b,c){return 1===a&&0===c?0:1}}),l(["ru"],{c:[1,3,4,5],cFn:function(a,b,c){var d=b%10,e=b%100;return 0===c&&1===d&&11!==e?0:0===c&&m(2,4,d)&&!m(12,14,e)?1:0===c&&0===d||0===c&&m(5,9,d)||0===c&&m(11,14,e)?2:3}}),l(["shi"],{c:[1,3,5],cFn:function(a,b){return 0===b||1===a?0:m(2,10,a)?1:2}}),l(["si"],{c:[1,5],cFn:function(a,b,c,d){return n([0,1],a)||0===b&&1===d?0:1}}),l(["sl"],{c:[1,2,3,5],cFn:function(a,b,c){var d=b%100;return 0===c&&1===d?0:0===c&&2===d?1:0===c&&m(3,4,d)||0!==c?2:3}}),l(["sq"],{c:[1,5],cFn:function(a){return 1===a?0:1},o:[1,4,5],oFn:function(a){var b=a%10,c=a%100;return 1===a?0:4===b&&14!==c?1:2}}),l(["sv"],{c:[1,5],cFn:function(a,b,c){return 1===b&&0===c?0:1},o:[1,5],oFn:function(a){var b=a%10,c=a%100;return n([1,2],b)&&!n([11,12],c)?0:1}}),l(["tzm"],{c:[1,5],cFn:function(a){return m(0,1,a)||m(11,99,a)?0:1}}),l(["uk"],{c:[1,3,4,5],cFn:function(a,b,c){var d=b%10,e=b%100;return 0===c&&1===d&&11!==e?0:0===c&&m(2,4,d)&&!m(12,14,e)?1:0===c&&0===d||0===c&&m(5,9,d)||0===c&&m(11,14,e)?2:3},o:[3,5],oFn:function(a){var b=a%10,c=a%100;return 3===b&&13!==c?0:1}})},{}],"/":[function(a,b,c){b.exports=a("./lib/babelfish")},{"./lib/babelfish":1}]},{},[])("/")});var deviceDetect=function(){var a,b,c,d,e,f,g,h,i,j;b=window.device,a={},window.device=a,d=window.document.documentElement,j=window.navigator.userAgent.toLowerCase(),a.ios=function(){return a.iphone()||a.ipod()||a.ipad()},a.iphone=function(){return!a.windows()&&e("iphone")},a.ipod=function(){return e("ipod")},a.ipad=function(){return e("ipad")},a.android=function(){return!a.windows()&&e("android")},a.androidPhone=function(){return a.android()&&e("mobile")},a.androidTablet=function(){return a.android()&&!e("mobile")},a.blackberry=function(){return e("blackberry")||e("bb10")||e("rim")},a.blackberryPhone=function(){return a.blackberry()&&!e("tablet")},a.blackberryTablet=function(){return a.blackberry()&&e("tablet")},a.windows=function(){return e("windows")},a.windowsPhone=function(){return a.windows()&&e("phone")},a.windowsTablet=function(){return a.windows()&&e("touch")&&!a.windowsPhone()},a.fxos=function(){return(e("(mobile;")||e("(tablet;"))&&e("; rv:")},a.fxosPhone=function(){return a.fxos()&&e("mobile")},a.fxosTablet=function(){return a.fxos()&&e("tablet")},a.meego=function(){return e("meego")},a.cordova=function(){return window.cordova&&"file:"===location.protocol},a.nodeWebkit=function(){return"object"===babelHelpers.typeof(window.process)},a.mobile=function(){return a.androidPhone()||a.iphone()||a.ipod()||a.windowsPhone()||a.blackberryPhone()||a.fxosPhone()||a.meego()},a.tablet=function(){return a.ipad()||a.androidTablet()||a.blackberryTablet()||a.windowsTablet()||a.fxosTablet()},a.desktop=function(){return!a.tablet()&&!a.mobile()},a.television=function(){var a,b=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];for(a=0;a<b.length;){if(e(b[a]))return!0;a++}return!1},a.portrait=function(){return window.innerHeight/window.innerWidth>1},a.landscape=function(){return window.innerHeight/window.innerWidth<1},a.noConflict=function(){return window.device=b,this},e=function(a){return-1!==j.indexOf(a)},g=function(a){var b;return b=new RegExp(a,"i"),d.className.match(b)},c=function(a){},i=function(a){g(a)&&(d.className=d.className.replace(" "+a,""))},a.ios()?a.ipad()?c("ios ipad tablet"):a.iphone()?c("ios iphone mobile"):a.ipod()&&c("ios ipod mobile"):a.android()?c(a.androidTablet()?"android tablet":"android mobile"):a.blackberry()?c(a.blackberryTablet()?"blackberry tablet":"blackberry mobile"):a.windows()?c(a.windowsTablet()?"windows tablet":a.windowsPhone()?"windows mobile":"desktop"):a.fxos()?c(a.fxosTablet()?"fxos tablet":"fxos mobile"):a.meego()?c("meego mobile"):a.nodeWebkit()?c("node-webkit"):a.television()?c("television"):a.desktop()&&c("desktop"),a.cordova()&&c("cordova"),f=function(){a.landscape()?(i("portrait"),c("landscape")):(i("landscape"),c("portrait"))},h=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(h,f,!1):window.attachEvent?window.attachEvent(h,f):window[h]=f,f(),"function"==typeof define&&"object"===babelHelpers.typeof(define.amd)&&define.amd?define(function(){return a}):void 0!==module&&module.exports?module.exports=a:window.device=a},EventEmitter=function(){function a(){var b=this;babelHelpers.classCallCheck(this,a),this.MAX_MISSED_EVENT_TTL=60,this._missedEvents=[],this._eventHandlers=[],setInterval(function(){b._missedEvents.length&&(b._missedEvents=b._missedEvents.filter(function(a){return Math.round((new Date).getTime()/1e3)-a.ts_add<=b.MAX_MISSED_EVENT_TTL}))},1e4)}return babelHelpers.createClass(a,[{key:"_checkEventHandlers",value:function(a){this._eventHandlers[a]||(this._eventHandlers[a]=[])}},{key:"on",value:function(a,b){var c=this;CBHCore.logger.debug({"Register event handler(EventEmitter.on)":{eventName:a}}),this._checkEventHandlers(a),this._eventHandlers[a].push(b);var d=this._missedEvents.filter(function(b){return b.eventName===a});this._missedEvents=this._missedEvents.filter(function(b){return b.eventName!==a}),d.forEach(function(a){c.emit(a.eventName,a.data[0],!1)})}},{key:"emit",value:function(a){var b=Array.prototype.slice.call(arguments,1),c=Array.prototype.slice.call(arguments,2);CBHCore.logger.debug({"EventEmitter.emit":{eventName:a,data:b}}),this._checkEventHandlers(a),this._eventHandlers[a].length?this._eventHandlers[a].forEach(function(a){a.apply(null,b)}):!1!==c&&this._missedEvents.push({eventName:a,data:b,ts_add:Math.round((new Date).getTime()/1e3)})}}]),a}(),JSON=window.JSON;!function LetsDestroyBadJSON(){(window.MooTools&&"undefined"!=typeof Native&&Native.implement||window.Prototype&&window.Prototype.Version)&&(JSON={},function(){"use strict";function f(a){return a<10?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"===(void 0===i?"undefined":babelHelpers.typeof(i))&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),void 0===i?"undefined":babelHelpers.typeof(i)){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"===(void 0===rep?"undefined":babelHelpers.typeof(rep)))for(f=rep.length,c=0;c<f;c+=1)"string"==typeof rep[c]&&(d=rep[c],(e=str(d,i))&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i))&&g.push(quote(d)+(gap?": ":":")+e);return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value,Array.prototype.toJSON=null;var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!==(void 0===b?"undefined":babelHelpers.typeof(b))||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"===(void 0===e?"undefined":babelHelpers.typeof(e)))for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}())}(),function(a){"use strict";a.console||(a.console={});for(var b,c,d=a.console,e=function(){},f=["memory"],g="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");b=f.pop();)d[b]||(d[b]={});for(;c=g.pop();)d[c]||(d[c]=e)}("undefined"==typeof window?void 0:window),function(){Array.prototype.indexOf&&-1===[].indexOf(1)||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=Number(b)||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1}),document.write=function(a){document.currentScript&&!document.currentScript.async&&HTMLDocument.prototype.write.apply(document,arguments)}}(),function(){if(window.MooTools||window.Prototype){var a=function(a){for(var b,c=[],d=new RegExp("(^| )"+a+"( |$)"),e=this.getElementsByTagName("*"),f=e.length,g=0;g<f;)b=e[g],d.test(b.className)&&c.push(b),g+=1;return c};document.getElementsByClassName=a,Element.prototype.getElementsByClassName=a,HTMLElement.prototype.getElementsByClassName=a}(window.MooTools||window.Prototype)&&(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(d.prototype=this.prototype),e.prototype=new d,e}),window.Prototype&&(Array.prototype.filter=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d},Array.prototype.shift=function(){if(0!==this.length){for(var a=this[0],b=0;b<this.length-1;b++)this[b]=this[b+1];return this.length--,a}},Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=new Array(g),e=0;e<g;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d})}(),function(){!/MSIE/.test(window.navigator.userAgent)&&window.attachEvent&&(window.attachEvent=null)}(),function(){Math.sign=Math.sign||function(a){return a=Number(a),0===a||isNaN(a)?a:a>0?1:-1},Math.trunc=Math.trunc||function(a){return(a=+a)-a%1||(isFinite(a)&&0!==a?a<0?-0:0:a)}}(),function(){if(!Array.prototype.findIndex){var a=function(a){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return f;return-1};Object.defineProperty(Array.prototype,"findIndex",{value:a,configurable:!0})}}();var Scheduler=function(){function a(b){babelHelpers.classCallCheck(this,a);var c=b.schedule,d=b.timezone;this.scheduled=b.scheduled||[],this.minuteInterval=b.minuteInterval||5,this.endOffset=1,this.initConstants(),this.schedule=this.sortSchedule(c),this.scheduleOffset=this.convertTimezoneToOffset(d),this.userOffset=(new StrongDate).getTimezoneOffset(),this.UTCSchedule=this.calcSchedule(c,this.scheduleOffset),this.UTCSchedule=this.UTCSchedule.concat(this.calcSchedule(this.UTCSchedule,this.cnst.week)),this.userSchedule=this.calcSchedule(this.UTCSchedule,-this.userOffset)}return babelHelpers.createClass(a,[{key:"isWorkTime",value:function(){var a=this.getNow();return this.userSchedule.some(function(b){return a>b.start&&a<b.end})}},{key:"onToggleMode",value:function(a){var b=this,c=void 0;null!=(c=this.isWorkTime()?this.getMinutesBeforeEnd():this.getMinutesBeforeStart())&&(c=60*c*1e3,setTimeout(function(){a(),b.onToggleMode(a)},c))}},{key:"getMinutesBeforeStart",value:function(){var a=this.getNow(),b=0;return this.userSchedule.some(function(c){return c.start>a&&(b=c.start-a,!0)}),b}},{key:"getMinutesBeforeEnd",value:function(){var a=this.getNow(),b=0,c=void 0;return this.userSchedule.some(function(d){(d.end>a&&void 0===c||void 0!==c&&d.start===c)&&(b=d.end-a,c=d.end)}),b-this.endOffset}},{key:"getMobileValues",value:function(){var a=this,b=this.scheduled,c=[],d=this.getNow(),e=Math.ceil(d/this.cnst.hour)*this.cnst.hour;return this.userSchedule.some(function(f){var g=void 0,h=void 0,i=void 0;if(!(f.end<d)){for(;f.start>e;)e+=a.cnst.hour;for(;f.start<=e&&e<f.end;){if(g=Math.floor(e/a.cnst.day),h=e%a.cnst.day/a.cnst.hour,i=a.constructDate(g,h),-1===b.indexOf(Number(i))&&c.push(i),c.length>=4)return!0;e+=2*a.cnst.hour}}}),c}},{key:"getNextWorkingDay",value:function(){return Object.keys(this.getValues({howManyDaysToPick:1}))[0]}},{key:"getValues",value:function(a){var b=this,c=a||{},d=c.howManyDaysToPick||4,e=c.minuteInterval||this.minuteInterval,f=c.keyInterval||30,g=c.maxItemsPerKey||1,h=Boolean(c.includeDisabled),i=this.scheduled,j={},k=this.getNow(),l=0,m=0;return this.userSchedule.some(function(a){var c=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;if(!(a.end<k)){for(;a.start>k||k%e!=0;)k+=b.cnst.minute;for(;a.start<=k&&k<a.end;){if(c=Math.floor(k/b.cnst.day),n=Number(b.constructDate(c,0)),!j[n]){if(++l>d)return!0;j[n]={}}o=Math.floor(k%b.cnst.day/b.cnst.hour),q=k%b.cnst.day%b.cnst.hour,r=b.constructDate(c,o,q),(q+f)%f==0&&(m=0),s=-1!==i.indexOf(Number(r))||m>=g,s&&!h||(p=Number(b.constructDate(c,o)),j[n][p]||(j[n][p]=[]),r._cbh_disabled=s,j[n][p].push(r),m++),k+=b.cnst.minute*e}}}),j}},{key:"initConstants",value:function(){this.cnst={},this.cnst.minute=1,this.cnst.hour=60*this.cnst.minute,this.cnst.day=24*this.cnst.hour,this.cnst.week=7*this.cnst.day}},{key:"getNow",value:function(){return this.getToday()*this.cnst.day+this.getHours()*this.cnst.hour+this.getMinutes()}},{key:"getToday",value:function(){return(new StrongDate).getDay()}},{key:"getHours",value:function(){return(new StrongDate).getHours()}},{key:"getMinutes",value:function(){return(new StrongDate).getMinutes()}},{key:"sortSchedule",value:function(a){return a.sort(function(a,b){return a.start<b.start?-1:a.start>b.start?1:0})}},{key:"calcSchedule",value:function(a,b){return a.map(function(a){return{start:a.start+b,end:a.end+b}})}},{key:"constructDate",value:function(a,b,c){var d=new StrongDate;return d.setDate(d.getDate()+(a-this.getToday())),d.setHours(b),d.setMinutes(c||0),d.setSeconds(0),d.setMilliseconds(0),d}},{key:"convertTimezoneToOffset",value:function(a){var b=a.replace(/^UTC/,"");if(""===b)return 0;var c=1;return"+"===b.slice(0,1)&&(c=-1),b=b.substr(1).split(":"),c*(60*parseInt(b[0],10)+parseInt(b[1],10))}}]),a}(),MaskedObserver=function(){function a(){this.subscribers=[]}return a.prototype={add:function(a){this.subscribers.push(a)},notify:function(){var a=this,b=function(){a.subscribers.forEach(function(a){a.start()}),Masked.postload()};0===Object.keys(Masked.phoneCodes.all).length?Masked.phoneCodes.loadMasks("all",MConf("lang"),function(){b()}):b()}},new a}(),$M=MaskedReady=function(){return function(a){this.use=!0,a(),MaskedObserver.notify()}}();$M.ready=$M;var alternativeReady=function(){return{timerID:0,init:function(){this.timerID&&clearTimeout(this.timerID),this.timerID=setTimeout(function(){MaskedObserver.notify()},250)}}}(),generalMaskedFn={extend:function(a,b){var c,d={},e=Object.prototype.hasOwnProperty;for(c in a)a.hasOwnProperty(c)&&e.call(a,c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&e.call(b,c)&&(d[c]=b[c]);return d}},MaskedConfig=MConf=function(){var a={},b={pathToList:"/js/masks/",prefix:"instId_",lang:"ru",country:"ru",one_country:!1,country_binding:!1,first_countries:["ru"],exceptions:a,initial_focus:!1,select_range:!1,onToggleList:null,onShowList:null,onHideList:null,onSend:null,onValueChanged:null,onValidationError:null,onShowInformation:null,show_validation_errors:!1,show_phone_information:!0,i18n:{ru:{errors:{phone_is_empty:"Телефон не заполнен, заполните все символы.",phone_not_exists:"Телефон введен не верно или не существует."}}},popover:{prefix_id:"masked_popover",prefix_class:"Masked_popover"}};return function(a){return"string"==typeof a?b[a]:b=generalMaskedFn.extend(b,a)}}(),Masked=function(a,b){function c(){for(var a=arguments,b=a.length,c=0,d=void 0;c!==b;){if(a[c]===d||"undefined"===babelHelpers.typeof(a[c])||null===a[c])return!1;c++}return!0}function d(){for(var a=arguments,b=a.length,c=0,d=0,e=void 0,f=[e,!1,""],g=f.length;c!==b;){for(d=0;d<g;d++)if("undefined"===babelHelpers.typeof(a[c])||a[c]===f[d]||0===a[c].length)return!0;c++}return!1}function e(a,b){var c=a.className;new RegExp("(^|\\s)"+b+"(\\s|$)","g").test(c)||(a.className=(c+" "+b).replace(/\s+/g," ").replace(/(^ | $)/g,""))}function f(a,b){a.className=a.className.replace(new RegExp("(^|\\s)"+b+"(\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}function g(a,b){for(;(a=a.parentNode)&&a!==b;);return!!a}function h(a){return a.replace(/\D+/g,"")}function i(a,b){var c,d=h(a),e=b.split(""),f=0;for(c in e)e.hasOwnProperty(c)&&"_"==e[c]&&f<d.length&&(e[c]=d[f],f++);return e.join("")}function j(a,b){if(a.setSelectionRange)a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveStart("character",b),c.moveEnd("character",b),c.select()}a.focus()}function k(a){var b,c=a.value;for(b=c.length;b>=0&&!t.test(c[b]);b--);return b}function l(a,b){var c=a.value.split("");t.test(c[b])&&(c[b]="_"),a.value=c.join("")}function m(a,b){var c=!1;for(var d in a)if(a.hasOwnProperty(d)&&a[d].iso_code===b.iso_code&&a[d].lang===b.lang){c=!0;break}return c}function n(a){return"function"==typeof a}function o(a){for(var b=[].filter.call(a.attributes,function(a){return/^data-/.test(a.name)}),c={},d=0;d<b.length;d++)c[b[d].name.replace(/^data-/,"")]=b[d].value;return c}function p(){return navigator.userAgent.toLowerCase().indexOf("android")>-1}function q(a,b){var e,f,g,h,i,j,k,l=[],m=w,n=m.all;if(d(n))return!1;n=m.sortPhones(n,"mask","desc"),d(m[b])||(n=m[b].concat(n));for(e in n)if(n.hasOwnProperty(e)){for(j=n[e].mask,k=!0,f=0,g=0;f<a.length&&g<j.length;){var o=j.charAt(g),p=a.charAt(f);if(t.test(o)||"_"===o){if(!("_"===o&&t.test(p)||p==o)){k=!1;break}f++,g++}else g++}if(k&&f==a.length){if(-1==j.substr(g).search(t),j=j.replace(new RegExp([t.source].concat("_").join("|"),"g"),"_"),"1"===a&&"us"!==n[e].iso_code)continue;l.push({mask:j,obj:n[e]})}}"us"!==b&&"ca"!==b||(l=w.sortPhones(l,"mask","desc")),i=!1;for(e in l)l.hasOwnProperty(e)&&(h=l[e].obj.mask.replace(/\D+/g,""),parseInt(h)===parseInt(a)&&(i=l[e]));return!i&&l.length>1&&l.sort(function(a,b){return Math.sign((a.mask.match(/_/g)||[]).length-(b.mask.match(/_/g)||[]).length)}),c(l[0])?i||l[0]||!1:(a=a.substring(0,a.length-1))?q(a,b):void 0}function r(a,b){var c,e,f,g,i,j,k=w,l=h(a);if(d(k[b]))return!0;j=k[b];for(c in j)if(j.hasOwnProperty(c)){for(g=j[c].mask,i=!0,e=0,f=0;e<l.length&&f<g.length;){var m=g.charAt(f),n=l.charAt(e);if(t.test(m)||"_"===m){if(!("_"===m&&t.test(n)||n==m)){i=!1;break}e++,f++}else f++}if(!0===i)break}return i}function s(a,b){var c,d=[];for(c in a)if(a.hasOwnProperty(c)){var e=a[c];d.push("<p>"+e.message+"</p>")}return d.length>0&&(y.show(b,d.join("")),!0)}var t=new RegExp("[0-9]"),u=function(){function a(a){var b=a||e.event;if(b.isFixed)return b;if(b.isFixed=!0,b.preventDefault=b.preventDefault||function(){this.returnValue=!1},b.stopPropagation=b.stopPropagation||function(){this.cancelBubble=!0},b.target||(b.target=b.srcElement),!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement==b.target?b.toElement:b.fromElement),null==b.pageX&&null!=b.clientX){var c=f.documentElement,d=f.body;b.pageX=b.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c.clientLeft||0),b.pageY=b.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c.clientTop||0)}return!b.which&&b.button&&(b.which=1&b.button?1:2&b.button?3:4&b.button?2:0),b}function b(b){var c,d=a(b),e=this.events[d.type];for(c in e)if(e.hasOwnProperty(c)){var f=e[c],g=f.call(this,d);!1===g&&(d.preventDefault(),d.stopPropagation())}}var d=0,e=window,f=document;return{add:function(a,f,g){a.setInterval&&a!=e&&!a.frameElement&&(a=e),g.guid||(g.guid=++d),a.events||(a.events={},a.handle=function(d){if(c(u))return b.call(a,d)}),a.events[f]||(a.events[f]={},a.addEventListener?a.addEventListener(f,a.handle,!1):a.attachEvent&&a.attachEvent("on"+f,a.handle)),a.events[f][g.guid]=g},remove:function(a,b,c){var d,e=a.events&&a.events[b];if(e){delete e[c.guid];for(d in e)if(e.hasOwnProperty(d))return;a.removeEventListener?a.removeEventListener(b,a.handle,!1):a.detachEvent&&a.detachEvent("on"+b,a.handle),delete a.events[b];for(d in a.events)if(a.events.hasOwnProperty(d))return;try{delete a.handle,delete a.events}catch(b){a.removeAttribute("handle"),a.removeAttribute("events")}}}}}(),v=function(a){var b,e,f,g,h,i,j,k={},l=["GET","POST","PUT"],m=["json","text"],n={},o=XMLHttpRequest,p="Msxml2.XMLHTTP",q={url:a.url||!1,async:a.async||!1,data:a.data||null,crossDomain:a.crossDomain||!1,complete:a.result||function(){},timeout:a.timeout||1e4,type:(-1!==l.indexOf(a.type)?a.type:null)||"GET",dataType:(-1!==m.indexOf(a.dataType)?a.dataType:null)||"json"};if(!d(q.url)){if("undefined"==(void 0===o?"undefined":babelHelpers.typeof(o))&&(o=function(){try{var a=ActiveXObject}catch(a){}try{return new a(p+".6.0")}catch(a){}try{return new a(p+".3.0")}catch(a){}try{return new a(p)}catch(a){}throw new Error("This browser does not support XMLHttpRequest.")}),g=new("onload"in new o?o:XDomainRequest),f=q.url,"string"==typeof q.data)try{q.data=JSON.parse(q.data)}catch(a){}"object"===babelHelpers.typeof(q.data)&&(q.data=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}(q.data)),"GET"===q.type&&q.data&&q.data.length>0&&(f=q.url+"?"+q.data.toString()),g.open(q.type,f,q.async),q.crossDomain||(n["X-Requested-With"]="XMLHttpRequest");for(b in n)n.hasOwnProperty(b)&&c(n[b])&&g.setRequestHeader(b,n[b]+"");q.data&&q.data.toString().length>0&&(g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),q.data=q.data.toString());try{g.send(q.data||null)}catch(a){}if(q.async)var r=setTimeout(function(){g.abort()},q.timeout);j=function(){if(4===g.readyState)if(q.async&&clearTimeout(r),j="undefined",4!==g.readyState)g.abort();else{h=g.status,"string"==typeof g.responseText&&(k.text=g.responseText);try{i=g.statusText}catch(a){i=""}h||q.crossDomain?1223===h&&(h=204):h=k.text?200:404}if(k&&(h||q.crossDomain?1223===h&&(h=204):h=k.text?200:404,200===h)){if("text"===q.dataType)e=k.text||"";else if("json"===q.dataType)try{e=JSON.parse(k.text)||""}catch(a){e=""}q.complete(e,h,i,g.getAllResponseHeaders())}},q.async?4===g.readyState?setTimeout(j,20):g.onreadystatechange=j:j()}},w={all:[],ae:[],an:[],ba:[],by:[],bt:[],ca:[],cn:[],de:[],ec:[],ee:[],id:[],il:[],jp:[],kp:[],kz:[],la:[],lb:[],ly:[],mc:[],mm:[],mx:[],my:[],ng:[],nz:[],ru:[],sa:[],sb:[],so:[],sr:[],th:[],tl:[],tv:[],tw:[],ua:[],us:[],vn:[],vu:[],ye:[],sortPhones:function(a,b,d){var e="mask"==b?"mask":"name",f="desc"==d?"desc":"asc";return a&&a.sort(function(a,b){return c(a[e])&&c(b[e])?("mask"===e?(a=a[e].replace(/\D+/g,""),b=b[e].replace(/\D+/g,"")):(a=a[e],b=b[e]),a>b?"asc"==f?1:-1:a<b?"asc"==f?-1:1:0):c(a[e])?-1:1}),a},loadMasks:function(a,b,c){var e=this;v({url:MConf("pathToList")+a+"/"+(d(b)?"ru":b)+".min.json",type:"GET",async:!0,crossDomain:!0,dataType:"json",result:function(b){e[a]=e.sortPhones(b,"mask","desc"),"function"==typeof c&&c()}})},findMaskByCode:function(a){var b,c,d=this,e=d.sortPhones(d.all,"name",1);for(b in d.all)if(d.all.hasOwnProperty(b)&&(c=e[b],c.iso_code===a))return c;return!1}},x={focus:function(a){Masked.getInst(this).focused()},dblclick:function(){this.click()},click:function(){var a=Masked.getInst(this);!1!==a.opt.select_range?a.setRange():a.focused()},blur:function(){var a=Masked.getInst(this);return!1!==a.opt.select_range&&a.unsetRange(),y.hide(),!0},textInput:function(a){var b,c=this,d=B,e=d.getInst(c),f=a.data,g=c.value;if(-1!==(b=g.indexOf("_")))!0===t.test(f)&&"_"===g[b]&&(c.value=h(g+""+f),e.setMask(c),setTimeout(function(){e.focused()}));else if(e.ifIssetNextMask()&&!0===t.test(f))return e.setMask(c),setTimeout(function(){e.focused()}),!0;return!1},input:function(a){if(a.preventDefault(),null===a.data){var b=this,c=B,d=c.getInst(b);b.value=d.opt.value;var e=k(b);l(b,e),j(b,e),d.setMask(b),setTimeout(function(){d.focused()})}},inputText:function(a){var b,c,d=this,e=B,f=e.getInst(d),g=a.which||a.keyCode,h=a.key?a.key:g>=96&&g<=105?String.fromCharCode(g-48):String.fromCharCode(g),i=d.value,j=f.opt.select_range;if(c=i.indexOf("_"),8===g)return b=k(d),!1!==j&&!0===j.focus&&(f.replaceRange(),b=j.start,f.unsetRange(),f.opt.select_range.changed=j.end-j.start>1),l(d,b),f.setMask(d),f.focused(),!1;if(isNaN(h))return!1;if(!0===t.test(h)&&"_"===i[c])!1!==j&&!0===j.focus&&(f.replaceRange(),f.unsetRange(),f.opt.select_range.changed=j.end-j.start>1,i=f.opt.element.value,c=i.indexOf("_")),f.addDigitToMask(h),f.setMask(d),f.focused();else if(f.ifIssetNextMask()&&!0===t.test(h))return f.setMask(d),
f.focused(),!0;return!1},paste:function(a){a.preventDefault();var b=this,c=B,d=c.getInst(b),e=(a.originalEvent||a).clipboardData.getData("text/plain");d.opt.element.value=h(e),d.setMask(b)}};!function(){var a;try{a=new KeyboardEvent("keydown"),"key"in a||"keyCode"in a||Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){return this.keyCode}})}catch(a){}}();var y=function(){return new function(){function a(a){return document.createRange().createContextualFragment(a)}function b(a,b,c){a.style[b]=c+"px"}function c(){d.hide()}var d=this,g=MConf("popover");return d.prefix_id=g.prefix_id,d.prefix_class=g.prefix_class,d.template='<div class="{class} {direction}" id="{id}" style="{styles}"><div class="arrow" style="left: 50%;"></div><h3 class="popover-title" style="display:none"></h3><div class="popover-content">{text}</div></div>',d.show=function(g,h,i){var j=g.getBoundingClientRect(),k=j.top,l=j.left,m=j.width,n=j.height,i=i||"top",o=d.template.replace("{direction}",i).replace("{class}",d.prefix_class).replace("{id}",d.prefix_id).replace("{styles}","display: block").replace("{text}",h),p=a(o).getElementById(d.prefix_id);p.style.visibility="hidden",p.style.display="block",document.body.appendChild(p),p.style.visibility="";var q=p.offsetWidth,r=p.offsetHeight;(r+10>k||"bottom"===i)&&(f(p,i),k=Math.ceil(n+k),e(p,"bottom"),i="bottom"),q>m&&(l-=(q-m)/2),"top"===i&&(k-=Math.ceil(r)+2),window.pageYOffset>0&&(k+=window.pageYOffset||window.scrollY||document.documentElement.scrollTop),b(p,"left",l),b(p,"top",k),u.add(document,"click",c)},d.hide=function(){null!==document.getElementById(d.prefix_id)&&(document.getElementById(d.prefix_id).remove(),u.remove(document,"click",c))},d}}(),z=function(a,b){var c=this;c.opt={listOpened:!1,instId:MConf("prefix")+function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<8;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}(),element:a,lang:b.lang||MConf("lang"),country:b.country||MConf("country"),phone:b.phone||!1,mask:b.mask||"",onSend:b.onSend||MConf("onSend"),onToggleList:b.onToggleList||MConf("onToggleList"),onShowList:b.onShowList||MConf("onShowList"),onHideList:b.onHideList||MConf("onHideList"),onValueChanged:b.onValueChanged||MConf("onValueChanged"),onValidationError:b.onValidationError||MConf("onValidationError"),one_country:b.one_country||MConf("one_country"),first_countries:b.first_countries||MConf("first_countries"),exceptions:b.exceptions||MConf("exceptions"),country_binding:b.country_binding||MConf("country_binding"),show_validation_errors:b.show_validation_errors||MConf("show_validation_errors"),i18n:b.i18n||MConf("i18n"),value:"",name:"",old:{},oldState:null,initial_focus:b.initial_focus||MConf("initial_focus"),select_range:!(!b.select_range&&!MConf("select_range"))&&{focus:!1,changed:!1,start:0,end:0},phoneBindingValid:!1},function(a,b){var d,f;if(b.phone){c.maskFinder(b.phone)||(b.phone=!1)}e(c.opt.element,c.opt.instId),c.opt.oldState=a.outerHTML,c.setTemplate(),f=c.opt,d=c.opt.element,d.value=f.value,d.placeholder=f.value,c.addActions(f.element)}(a,c.opt)};z.prototype={setMask:function(a){var b=this,c=b.opt.value;this.maskFinder(a.value,this.opt.country),n(b.opt.onValueChanged)&&c!=a.value&&b.opt.onValueChanged(h(a.value),a.value)},maskFinder:function(a,b){var e,f,g,j=this,k=A,l=k.countries,n=h(a+""),o=b||!1,p=w,r=j.opt.one_country,s=j.opt.exceptions;if(n){if(!d(s[o])&&!d(s[o].exceptions)){var t=s[o].exceptions;p.findMaskByCode(o).phone_code;for(var u in t)if(t.hasOwnProperty(u)&&n===u){n=n.replace(n,t[u]);break}}}else{if(!1===r)return!1===a&&j.setInp(j.opt.element,j.opt.country,j.opt.name,j.opt.value.replace(/[0-9]/g,"_")),!1;(g=p.findMaskByCode(r))&&(n=h(g.mask))}if(g=q(n,o)){if(f=g.obj,e=f.iso_code,!1!==r&&r.toString().toLowerCase()!==e)return!1;if(c(p[e])&&d(p[e])){var v={iso_code:e,lang:j.opt.lang};m(l,v)||(l.push(v),!1===k.initialization&&p.loadMasks(e,j.opt.lang,function(){g=q(n,e),j.setInp(j.opt.element,g.obj.iso_code,g.obj.name,i(n,g.mask)),j.focused()})),j.setInp(j.opt.element,g.obj.iso_code,g.obj.name,i(n,g.mask))}else c(p[e])&&!d(p[e])&&!1!==o&&(g=q(n,e)),n=!0===j.opt.select_range.changed&&-1!==a.indexOf("_")?a:i(n,g.mask),j.setInp(j.opt.element,f.iso_code,f.name,n)}return!0===j.opt.initial_focus&&j.focused(),g},setTemplate:function(){var a,b,d,h,i,j,k,l,m,o,p,q,r=this,s=window,t=document,v=r.opt,x=v.element,y=r.opt.one_country,z=r.opt.first_countries,A=t.getElementsByClassName("lists active"),B=function(a){return document.createElement(a)},C=function(a,b){a.innerHTML=b.outerHTML},D=function(a,b){return a.className=b},E=w,F=function(a,b){a.appendChild(b)};if(m=B("div"),C(m,x),setTimeout(function(){D(m,"CBH-masks")}),x.parentNode.replaceChild(m,x),y||(k=B("i"),D(k,"caret")),j=B("div"),y||C(j,k),D(j,"flag "+v.country),o=B("div"),C(o,j),D(o,"selected"),y?(p=B("div"),C(p,o),D(p,"country")):(p=B("div"),C(p,o),D(p,"flags"),d=B("ul"),D(d,"lists")),q=E.sortPhones(E.all,"name","asc"),0!==q.length){var G=function(){var e=q[a],f=e.iso_code.toString().toLowerCase(),g=e.name,j=e.mask;if(!c(g))return!1;!1===v.phone&&v.country===f&&(r.opt.name=g,r.opt.mask=j,r.opt.value=j),y||(b=B("li"),b.className="country",b.setAttribute("data-isocode",f),b.setAttribute("data-mask",j),u.add(b,"click",r.maskReplace),h=B("i"),D(h,"flag "+f),F(b,h),i=B("span"),D(i,"name"),i.innerHTML=g,F(b,i),i=B("span"),D(i,"code"),i.innerHTML="+"+e.phone_code,F(b,i),F(d,b))};if(!y){for(a in q)!q.hasOwnProperty(a)||-1===z.indexOf(q[a].iso_code)||G();var H=B("hr");F(d,H)}for(a in q)!q.hasOwnProperty(a)||G();y||(F(p,d),u.add(d,"mousedown",function(a){a.stopPropagation()})),m.insertBefore(p,m.firstChild),y||(m.getElementsByClassName("selected")[0].onclick=function(){l=m.getElementsByClassName("lists")[0];var b="closed",c=document,d=function a(b){g(b.target,p)||(f(l,"active"),f(l,"top"),u.remove(c,"click",a),n(v.onHideList)&&v.onHideList(),n(v.onToggleList)&&v.onToggleList("closed"))};if(A.length)for(a=0;a<A.length;a++)l!==A[a]&&f(A[a],"active");if(!0!==/active/.test(l.className)){u.add(c,"click",d),e(l,"active");var h=s.innerHeight||t.documentElement.clientHeight||t.body.clientHeight,i=function(a){var b=0,c=0;if(a&&a.offsetParent)do{b+=a.offsetLeft,c+=a.offsetTop}while(a=a.offsetParent);return{left:b,top:c}}(l),j=i.top-l.scrollTop,k=l.clientHeight;h-(j+m.childNodes[1].clientHeight)<=k&&e(l,"top"),b="opened"}else f(l,"active"),f(l,"top"),u.remove(c,"click",d),b="closed";"opened"===b&&n(v.onShowList)&&v.onShowList(),"closed"===b&&n(v.onHideList)&&v.onHideList(),n(v.onToggleList)&&v.onToggleList(b)}),r.opt.element=m.childNodes[1]}},setInp:function(a,b,c,e){var f,g=this.opt;d(a.parentNode.getElementsByClassName("selected")[0])||(f=a.parentNode.getElementsByClassName("selected")[0].getElementsByClassName("flag")[0],f.className="flag "+b,"undefined"!==(void 0===c?"undefined":babelHelpers.typeof(c))&&f.parentNode.setAttribute("title",c)),g.country=b,g.name=c,g.value=e,g.mask=e,a.value=e},focused:function(){var a=this,b=(a.opt,a.opt.element),c=b.value,d=c.indexOf("_"),e=-1===d?c.length:d;j(b,e)},setRange:function(){var a=this,b=a.opt,c=a.opt.element,d=c.selectionStart,e=c.selectionEnd;d!==e?b.select_range={focus:!0,changed:!1,start:d,end:e}:a.focused()},unsetRange:function(){this.opt.select_range={focus:!1,changed:!1,start:0,end:0}},replaceRange:function(){var a=this,b=(a.opt,a.opt.element,a.opt.element.value.split("")),c=a.opt.select_range;for(var d in b)b.hasOwnProperty(d)&&d>=c.start&&d<c.end&&t.test(b[d])&&(b[d]="_");a.opt.element.value=b.join("")},blured:function(){this.opt.element.blur()},maskReplace:function(){var a=this,b=w,c=a.parentNode.parentNode,d=c.parentNode.childNodes[1],e=Masked.getInst(d),g=o(a),j=b.findMaskByCode(e.opt.country),k=b.findMaskByCode(g.isocode);e.setInp(e.opt.element,k.iso_code,k.name,i(h(d.value).replace(j.phone_code,k.phone_code),k.mask.replace(new RegExp([t.source].concat("_").join("|"),"g"),"_"))),f(c.childNodes[1],"active"),n(e.opt.onHideList)&&e.opt.onHideList(),n(e.opt.onToggleList)&&e.opt.onToggleList("closed")},ifIssetNextMask:function(){var a=this,b=a.opt.country,d=w,e=a.opt.element.value,f=e.replace(new RegExp([t.source].concat("_").join("|"),"g"),"_").replace(/[+()-]/g,"").length;if(c(d[b]))for(var g in d[b])if(d[b].hasOwnProperty(g)){var h=d[b][g].mask.replace(new RegExp([t.source].concat("_").join("|"),"g"),"_").replace(/[0-9+()-]/g,"").length;if(h>f)return!0}return!1},setPhone:function(a){var b=this;b.opt.element.value=h(a),b.setMask(b)},addActions:function(a){u.add(a,"focus",x.focus),u.add(a,"blur",x.blur),u.add(a,"click",x.click),u.add(a,"dblclick",x.dblclick),p()?(u.add(a,"textInput",x.textInput),u.add(a,"input",x.input)):u.add(a,"keydown",x.inputText),u.add(a,"paste",x.paste)},checkCountryBinding:function(a,b){var c=this,d=c.opt;return r(d.element.value,d.country)},isValidPhone:function(a){var b=h(a);return"string"==typeof b&&""!==b&&-1===b.indexOf("_")&&!/(.)\1{6,}/i.test(b.replace(/\D+/g,""))},validationErrors:function(){var a=this,b=a.opt,c=b.element.value,d=h(c),e=[];return!!b.show_validation_errors&&((!1===a.checkCountryBinding()&&b.country_binding||/(.)\1{6,}/i.test(d.replace(/\D+/g,"")))&&e.push({type:"phone_not_exists",message:b.i18n[b.lang].errors.phone_not_exists}),""!==d&&-1===c.indexOf("_")||e.push({type:"phone_is_empty",message:b.i18n[b.lang].errors.phone_is_empty}),b.onValidationError?b.onValidationError(e):s(e,a.opt.element))},addDigitToMask:function(a){var b=this.opt.element.value,c=b.split("");for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];"_"===e&&null!==a&&(c[d]=a,a=null)}this.opt.element.value=c.join("")}};var A={initialization:!0,instances:[],countries:[]},B=function(a){var b=this;return b.elements=[],b.options={lang:MConf("lang"),country:MConf("country")},b.init(a),"undefined"===babelHelpers.typeof(MaskedReady.use)&&alternativeReady.init(),b};return B.postload=function(){var a,b,e,f,g=w,h=A,i=h.instances,j=h.countries;for(a in j)j.hasOwnProperty(a)&&(f=j[a],c(g[f.iso_code])&&d(g[f.iso_code])&&g.loadMasks(f.iso_code,f.lang,function(){for(a in i)i.hasOwnProperty(a)&&(e=i[a],b={iso_code:e.opt.country,lang:e.opt.lang},m(j,b)&&e.maskFinder(e.opt.phone,e.opt.country))}));h.initialization=!1},B.getInst=function(a){return A.instances[a.className.match(new RegExp(MConf("prefix")+"[0-9a-zA-Z]+"))]},B.phoneCodes=w,B.getById=function(a){var b=document.getElementById(a);return null!==b&&this.getInst(b)},B.getPhone=function(a){return!!a&&B.prototype.getPhone(a)},B.isValid=function(a){return!!a&&B.prototype.isValid(a)},B.checkCountryBinding=function(a,b){return!(!a||!b)&&B.prototype.checkCountryBinding(a,b)},B.validationErrors=function(a,b){return!!a&&B.prototype.validationErrors(a,b)},B.Popover=y,B.toggle=function(a){var b=this.getInst(a),c=b.opt;d(a.parentNode)||"CBH-masks"!==a.parentNode.className?(c.element=a,b.setTemplate(),c.element.value=c.value,b.addActions(c.element)):a.parentNode.outerHTML=c.oldState},B.prototype={init:function(b){var c=this;if(b&&("string"==typeof b&&(b={selector:b}),c.options=generalMaskedFn.extend(c.options,b)),"undefined"!==babelHelpers.typeof(b.selector)){c.elements=function(b){var c,d,e,f=[],g=b.selector;if("string"==typeof g)if(e=g[0],"."!==e&&"#"!==e||(g=g.substr(1)),"."===e){d=a.getElementsByClassName(g);for(c in d)d.hasOwnProperty(c)&&"null"!==d[c]&&(f[d[c].id||c]=d[c])}else"#"===e?"null"!==(d=a.getElementById(g))&&f.push(d):console.log("selector finder empty");else g.nodeType&&"null"!==g&&f.push(g);return f}(b)}return Object.keys(c.elements).length&&MaskedObserver.add(c),c},start:function(){var a,b,c,d,e=this,f=e.elements;for(a in f)f.hasOwnProperty(a)&&(b=f[a])&&!b.className.match(new RegExp(MConf("prefix")+"[0-9a-zA-Z]+"))&&(c=generalMaskedFn.extend(generalMaskedFn.extend({},e.options),o(b)),d=new z(b,c),A.instances[d.opt.instId]=d)},setPhone:function(a){var b,c=this.elements;for(var e in c)c.hasOwnProperty(e)&&(b=B.getInst(c[e]),d(b)||b.maskFinder(a||!1))},getPhone:function(a,b){var c,e=[],f=[],g=q,j=b||!0;if(a)a=h(a),c=g(a),c&&(c=i(a,c.mask)),j||(c=h(c)),e.push(c);else{f=this.elements;for(var k in f)f.hasOwnProperty(k)&&(d(B.getInst(f[k]))||(c=B.getInst(f[k]).opt.value,c=i(c,g(h(c)).mask),j||(c=h(c)),e.push(c)))}return a||!a&&1==Object.keys(f).length?e[0]:e},isValid:function(a){var b,c=!1,d=q,e=[];if(a){d(h(a))&&(c=-1===i(h(a),d(h(a)).mask).indexOf("_"))}else e=this.elements,Object.keys(e).length?(b=B.getInst(e[0]).opt.value,c=-1===i(h(b),d(h(b)).mask).indexOf("_")):c=!1;return c},checkCountryBinding:function(a,b){return r(a,b)},validationErrors:function(a,b){var c=a.value,d=h(c),e=[],f=B.getInst(a),g=null;f&&(g=f.opt);var i=g?g.i18n:MaskedConfig("i18n"),j=g?g.lang:MaskedConfig("lang"),k=g?g.country:MaskedConfig("country"),l=g?g.country_binding:MaskedConfig("country_binding");return(!1===this.checkCountryBinding(c,k)&&l||/(.)\1{6,}/i.test(d.replace(/\D+/g,"")))&&e.push({type:"phone_not_exists",message:i[j].errors.phone_not_exists}),""!==d&&-1===c.indexOf("_")||e.push({type:"phone_is_empty",message:i[j].errors.phone_is_empty}),y.hide(),!s(e,a)&&b()}},B}(document,window),Main=function(){function a(){babelHelpers.classCallCheck(this,a),this.defaultVersion="3",this.hunter_code=null,this.head=void 0===loc.head?doc.getElementsByTagName("head")[0]:doc.head,this.cached=!1,this.currentScript=cur_script,this.pageStartTime=(new Date).getTime(),this.opt=opt,this.version=null,this.langFromGet=null,this.db_params=null,this.cbh_db_error=null,this.free_mode=!1,this.has_sms=!1,this.greeters_allowed=!1,this.extensionMode=!1,this.phonesTotal=null,this.core_only=!1,this.catch_avatar=null,this.brand_logo=null,this.brand_large_logo=null,this.brand_image=null,this.is_mobile=null,this.is_tablet=null,this.default_phone={},this.params={mainSchedule:null,customOffices:{},hasCustomOffices:!1,offices:{}},this.external_settings_name="CBHSettings",this.external_settings=null,this.endpoint=null,this.cache={css:[],js:[]},this.lib={StrongDate:Date,EventEmitter:EventEmitter,Sweety:Sweety,Scheduler:Scheduler},this.EventEmitter=new EventEmitter,this.Masked=Masked,this.MaskedConfig=MaskedConfig,this.hidePill=!1}return babelHelpers.createClass(a,[{key:"init",value:function(a){var b=this.currentScript.src;if(void 0!==b){clearInterval(tId);var c=this.helpers.parseUri(b).query,d=void 0===c.v?null:c.v;this.hunter_code=void 0===c.hunter_code?a:c.hunter_code,this.storage&&this.hunter_code&&this.storage.setPrefix(this.opt.storage_prefix+"_"+this.hunter_code),this.langFromGet=void 0===c.lang?null:c.lang,void 0!==c.settings&&(this.external_settings_name=c.settings),this.endpoint=opt.endpoint_protocol+"//"+opt.endpoint,this.initializeExternalSettings(),this.storage.get("entrance_time","session")||this.storage.save("entrance_time",Number(new StrongDate),"session"),this.initializeCookies(),void 0!==c.extension_mode&&"1"===c.extension_mode&&(this.extensionMode=!0,void 0!==c.phone&&c.phone.length>0&&this.callTracking.setManagerPhone(decodeURIComponent(c.phone),!0)),void 0!==c.phonesTotal&&(this.phonesTotal=parseInt(c.phonesTotal,10)),func.debug_mode(c.dev_mode),func.set_debug_scope(c.debug_scope),void 0!==c.core_only&&"1"===c.core_only&&(this.core_only=!0),void 0===c.platform?this.is_mobile=this.helpers.isMobile():this.is_mobile="mobile"===c.platform,this.is_tablet=this.helpers.isTablet(),this.getParams(d)}}},{key:"initializeCookies",value:function(){this.helpers.setStartCookie(),this.helpers.prolongStartCookie(),setInterval(this.helpers.prolongStartCookie,6e4)}},{key:"initializeExternalSettings",value:function(){"object"===babelHelpers.typeof(win[this.external_settings_name])&&(this.external_settings=win[this.external_settings_name]),this.external_settings=this.helpers.extend(this.external_settings,this.getCBHMetaProperties())}},{key:"getCBHMetaProperties",value:function(){var a=this.lib.Sweety(),b=a("meta").elements,c=[];return this.helpers.isArray(b)&&b.length>0&&b.forEach(function(a){var b=a.getAttribute("property"),d=void 0,e=void 0;void 0!==b&&b&&(d=b.match(/^cbh:(.+)$/))&&(e=a.getAttribute("content"))&&(c[d[1]]=e)}),c}},{key:"tryExternalCallback",value:function(a,b){return"object"===babelHelpers.typeof(this.external_settings)&&!this.helpers.isNull(this.external_settings)&&"string"==typeof this.external_settings[a]&&this.helpers.isFunction(win[this.external_settings[a]])?win[this.external_settings[a]]:this.helpers.isFunction(b)?b:function(){}}},{key:"tryExternalCallbackOnce",value:function(a,b){return this.helpers.once(this.tryExternalCallback(a,b))}},{key:"tryConditionalRepeatedCallback",value:function(a,b,c){var d=b||{external:!1,fallback:!0};return this.helpers.isExternalSettingsFunction(a)?d.external?win[this.external_settings[a]]:this.helpers.once(win[this.external_settings[a]]):this.helpers.isFunction(c)?d.fallback?c:this.helpers.once(c):function(){}}},{key:"tryExternalDefault",value:function(a){return this.tryConditionalRepeatedCallback(a,{external:!0,fallback:!0},function(){return"EXTERNAL_FUNC_MISSING"})()}},{key:"savePriorityChannel",value:function(a){var b=this.helpers.getEndpointProtocol()+"//"+this.opt.endpoint+"/hunter/savePriorityChannel/?"+this.helpers.makeQueryString({ch:a});this.loadFile("js",b,!1)}},{key:"emdedWidgetClientId",value:function(a,b){this.server.ajax({url:this.helpers.getEndpointProtocol()+"//"+this.opt.endpoint+"/hunter/v7_get_widget_client_id/",type:"get",async:!0,crossDomain:!0,dataType:"json",data:{sid:db_params.hunter_sid,hcode:this.hunter_code},result:function(c){c.widget_client_id&&(b.client_data=b.client_data||{},b.client_data.id=c.widget_client_id),a()}})}},{key:"getParams",value:function(a){var b=this,c=void 0,d=void 0,e=function(){async.series([function(e){c="undefined"==typeof db_params?b.db_params:db_params,d=parseInt(a||c.version||b.defaultVersion,10),e()},function(e){return(c="undefined"==typeof db_params?b.db_params:db_params)&&c.client_data&&c.client_data.id?e():(d=parseInt(a||c.version||b.defaultVersion,10),isNaN(d)||d<7?e():c.cbh_channels&&(b.is_mobile&&c.cbh_channels.mob_tg||!b.is_mobile&&c.cbh_channels.desc_tg)?void b.emdedWidgetClientId(e,c):e())},function(c){b.preConfig(a,c)},function(a){if(d<10||b.helpers.isMobile()||!b.helpers.isGreetersAllowed())return a();cbh_ldr.api.getActiveGreeters(a)}])};if(this.opt.use_storage&&this.storage.test()){var f=this.storage.get("db_params_update_time","session");f&&(new Date).getTime()-f<=1e3*this.opt.storage_cache_lifetime&&(this.db_params=this.storage.get("db_params","session")||null,this.db_params&&void 0!==this.db_params.version&&-1!==["8","9","10"].indexOf(this.db_params.version)&&(this.db_params=null))}null===this.db_params?this.server.get(e):e()}},{key:"loadGreetersJS",value:function(){var a="//"+this.opt.static_domain+this.opt.greetersJs;this.db_params.version>=10&&!this.helpers.isMobile()&&!this.isLoaded("js",a)&&this.loadFile("js",a,!1)}},{key:"preConfig",value:function(a,b){var c=this;if("undefined"!=typeof db_params&&null===this.db_params&&(this.db_params=db_params),"undefined"!=typeof cbh_db_error)return-1===[1,2,8,9,10].indexOf(cbh_db_error)?this.logErrorCode(cbh_db_error,"Widget load error: ","warn"):this.logErrorCode(cbh_db_error,"Widget load error: ","error"),b();if(void 0!==this.db_params){if(this.version=a||this.db_params.version||this.defaultVersion,this.hunter_code=this.db_params.hunter_code,this.helpers.isMobile()&&func.dbParamIsEnabled(this.db_params.mobile_v3_force)?this.mobile_v3_force=!0:this.helpers.isMobile()&&-1===["7","8","9"].indexOf(this.version)&&func.dbParamIsEnabled(this.db_params.mobile_nextgen)&&(this.mobile_nextgen=!0),this.free_mode=func.dbParamIsEnabled(this.db_params.free_mode),this.greeters_allowed=func.dbParamIsEnabled(this.db_params.greeters_allowed),loc.hash){var d=loc.hash.substring(1);"callbackhunter-dark"===d&&(this.free_mode=!0),d.match(/^callbackhunter-(.+)/)&&this.loadGreetersJS()}this.has_sms=func.dbParamIsEnabled(this.db_params.has_sms),this.user.init(),void 0!==this.db_params.integration&&this.helpers.isArray(this.db_params.integration)&&this.db_params.integration.forEach(function(a){"trade_dealer"===a&&c.loadFile("js",c.opt.endpoint+"/widgets/cbh_core/js/modules/tdealer.min.js",!0,function(){return c.tdealer.init()})});for(var e in this.db_params)this.db_params.hasOwnProperty(e)&&e.match(/^show_phone_([a-z]{2}|default)$/i)&&(this.default_phone[e.split("show_phone_")[1]]=this.db_params[e])}if(func.block_country()||func.block_referer_host()||this.is_mobile&&!this.helpers.isMobileEnabled())return b();this.initWidget(b),this.debug_start_params()}},{key:"debug_start_params",value:function(){var a=this.helpers.getWidgetMode();this.logger.debug({hasSubscription:this.helpers.hasSubscription()}),parseInt(this.version,10)<10&&(this.logger.debug({catchingStrength:a},"catching"),this.logger.debug({checkIfCatchingAvailable:this.helpers.checkIfCatchingAvailable(a)},"catching"))}},{key:"isWorkTime",value:function(){return this.params.mainSchedule.isWorkTime()}},{key:"initWidget",value:function(a){var b=this;if(void 0===this.db_params)return console.warn("error invalid code or database error"),a();if(void 0!==this.db_params.timestamp&&(StrongDate=SD({timestamp:1e3*this.db_params.timestamp,offset:this.db_params.time_offset,widgetVersion:this.db_params.version}),this.lib.StrongDate=StrongDate,this.lib.StrongDate._offset?this.db_params.time_offset=this.lib.StrongDate._offset:this.db_params.time_offset=1),void 0===this.db_params.schedule)throw new Error("No schedule");this.helpers.isMobile()||this.opt.telemetry_disabled||this.extensionMode||this.telemetry.start(this.opt.telemetry_send_interval);var c={};async.series([function(a){b.server.ajax({url:b.helpers.getEndpointProtocol()+"//"+b.opt.endpoint+"/hunter/get_scheduled_times/"+b.hunter_code,type:"get",async:!0,crossDomain:!0,dataType:"json",data:{},result:function(b){c=b,a()}})},function(a){if(b.params.mainSchedule=new Scheduler({schedule:b.db_params.schedule,timezone:b.db_params.time_zone,scheduled:c[0],minuteInterval:b.db_params.deferred_calls_interval}),!b.params.mainSchedule.isWorkTime()&&func.dbParamIsEnabled(b.db_params.disable_night_mode))return void(b.opt.dev_mode&&console.log("Night mode is disabled"));if(b.params.mainSchedule.isWorkTime()&&func.dbParamIsEnabled(b.db_params.disable_worktime_mode))return void(b.opt.dev_mode&&console.log("Worktime mode is disabled"));if(b.db_params.custom_office_list&&b.db_params.custom_office_list.length>1?(b.db_params.custom_office_list.forEach(function(a){var d=JSON.parse(JSON.stringify(a));void 0===d.params||b.helpers.isNull(d.params)||void 0===d.params.schedule||void 0===d.params.timezone?d.schedule=!1:d.schedule=new Scheduler({schedule:d.params.schedule,timezone:d.params.timezone,scheduled:c[d.id],minuteInterval:b.db_params.deferred_calls_interval}),b.params.customOffices[d.id]=d}),b.params.hasCustomOffices=!0):b.db_params.show_office_list&&b.db_params.show_office_list.length>1&&(b.params.offices=b.db_params.show_office_list),!b.core_only){if("object"===babelHelpers.typeof(b.external_settings)&&!b.helpers.isNull(b.external_settings)&&"object"===babelHelpers.typeof(b.external_settings.start_condition)){var d=b.external_settings.start_condition;if(void 0!==d.phone&&(1===parseInt(d.phone,10)&&!b.user.client_phone||0===parseInt(d.phone,10)&&b.user.client_phone))return}!b.helpers.hasSubscription()||b.db_params.hasOwnProperty("disable_cmm_notifications")&&func.dbParamIsEnabled(b.db_params.disable_cmm_notifications)||(b.logger.debug({cmmSent:!0},"cmm"),b.server.send({tmp_visit:1}));var e=b.getFiles();b.lang.init(function(){var a=void 0;b.cssCounter=0;for(var c=0;c<e.stylesheets.length;c++)a="//"+b.opt.static_domain+e.stylesheets[c],b.isLoaded("css",a)||b.loadFile("css",a,!1,function(){return b.countCSS()});a="//"+b.opt.static_domain+e.scripts[0],b.isLoaded("js",a)||b.loadFile("js",a,!1,function(){return b.startWidget()}),!func.dbParamIsEnabled(b.db_params.use_yandex_maps_api)||b.opt.use_storage&&b.user.location||(a="//api-maps.yandex.ru/1.1/index.xml",b.isLoaded("js",a)||b.loadFile("js",a,!1,function(){"undefined"!=typeof YMaps&&YMaps.location&&b.user.setLocation(YMaps.location)})),b.opt.use_storage&&b.storage.test()&&!b.helpers.isEmpty(b.db_params)?(b.storage.save("db_params_update_time",(new Date).getTime(),"session"),b.storage.save("db_params",b.db_params,"session")):b.opt.use_storage?console.warn("не удалось загрузить db_params"):console.warn("storage disabled"),b.lang.addFilteredMessages(),e.masked_config&&(opt.masked_config=b.helpers.extend(opt.masked_config,e.masked_config)),MaskedConfig(b.helpers.extend(opt.masked_config,{lang:b.lang.langCode}))}),a()}},function(){a()}])}},{key:"getFiles",value:function(){if(this.mobile_v3_force)return this.opt.versions.v3;if(this.mobile_nextgen)return this.opt.versions.m1;var a=this.opt.versions["v"+this.version];return void 0===a?console.warn("this version does not exist"):(this.helpers.isMobile()&&void 0!==a.mobile?a=a.mobile:void 0!==a.desktop&&(a=a.desktop),a)}},{key:"startWidget",value:function(){var a=this;this.getFiles().stylesheets.length===this.cssCounter?(ClbhObject.init(),"undefined"!=typeof CBHBanner&&CBHBanner&&this.helpers.isFunction(CBHBanner.init)&&CBHBanner.init()):setTimeout(function(){return a.startWidget()},50)}},{key:"countCSS",value:function(){this.cssCounter=this.cssCounter?this.cssCounter++:1}},{key:"loadFile",value:function(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},f=c?this.helpers.setLocaleProtocol(b,!0):b;if(this.cache[a].hasOwnProperty(f))return!d||d();this.cached&&(this.cache[a][f]=1),f=this.helpers.setLocaleProtocol(f),!0===this.opt.dev_mode&&(f+=""===this.helpers.parseUri(f).search?"?"+this.helpers.rand(5):"&"+this.helpers.rand(5));var g=void 0;"js"===a?(g=doc.createElement("script"),g.type="text/javascript",g.src=f,g.async=!0,g.charset="UTF-8",e.id&&(g.id=e.id)):"css"===a&&(g=doc.createElement("link"),g.type="text/css",g.href=f,g.rel="stylesheet"),d&&(g.readyState?g.onreadystatechange=function(){"loaded"!==g.readyState&&"complete"!==g.readyState||(g.onreadystatechange=null,d())}:(g.onload=function(){return d()},e.cbOnError&&(g.onerror=function(){return d()}))),this.head.appendChild(g)}},{key:"isLoaded",value:function(a,b){for(var c=doc.getElementsByTagName("js"===a?"script":"link"),d=0;d<c.length;d++)if(this.helpers.parseUri(b).path===this.helpers.parseUri(c[d].src).path)return!0;return!1}},{key:"logErrorCode",value:function(a,b,c){if(void 0!==a){var d=void 0===b?"Widget error: ":b,e=void 0!==c&&"error"===c?"error":"warn";console[e](String(d)+a),this.cbh_db_error=a}}},{key:"getDefaultPhoneCode",value:function(){return void 0!==this.default_phone[this.user.language]?this.default_phone[this.user.language]:void 0!==this.default_phone.default?this.default_phone.default:""}}]),a}(),cbh_ldr=new Main,defaultParams={expires:getExpireTime(365),path:"/"},Cookies=function(){function a(){babelHelpers.classCallCheck(this,a)}return babelHelpers.createClass(a,[{key:"get",value:function(a){return getList()[a]}},{key:"set",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=encodeURIComponent(a),e=encodeURIComponent(JSON.stringify(b));void 0===c.expires?c.expires=defaultParams.expires:"number"==typeof c.expires?c.expires=getExpireTime(c.expires):c.expires instanceof Date&&(c.expires=c.expires.toUTCString()),c.path=defaultParams.path;var f=[d+"="+e];for(var g in c)if(c.hasOwnProperty(g)){var h=g,i=c[g];!0!==i&&(h+="="+i),f.push(h)}doc.cookie=f.join(";")}},{key:"delete",value:function(a){this.set(a,"",{expires:-1})}}]),a}();cbh_ldr.cookies=new Cookies;var Storage=function(){function a(){babelHelpers.classCallCheck(this,a),this.db_prefix=cbh_ldr.opt.storage_prefix,this.storage={local:win.localStorage,session:win.sessionStorage}}return babelHelpers.createClass(a,[{key:"setPrefix",value:function(a){this.db_prefix=a}},{key:"test",value:function(){try{return win.JSON&&win.JSON.parse&&win.JSON.stringify&&win.sessionStorage}catch(a){return console.warn(a),!1}}},{key:"get",value:function(a,b,c){var d="session"===b?"session":"local",e=(void 0===c?this.db_prefix:c)+"."+a;try{return this.test()?JSON.parse(this.storage[d][e]):JSON.parse(cbh_ldr.cookies.get(e))}catch(a){return!1}}},{key:"save",value:function(a,b,c,d){var e="session"===c?"session":"local",f=(void 0===d?this.db_prefix:d)+"."+a;try{if(this.test())this.storage[e][f]=win.JSON.stringify(b);else{var g={expires:"session"===e?"":365};cbh_ldr.cookies.set(f,b,g)}}catch(a){return!1}}},{key:"delete",value:function(a,b){var c="session"===b?"session":"local",d=this.db_prefix+"."+a;try{this.test()?this.storage[c][d]=void 0:cbh_ldr.cookies.delete(d)}catch(a){return!1}}}]),a}();cbh_ldr.storage=new Storage;var Helpers=function(){function a(){babelHelpers.classCallCheck(this,a),this.detector={jivo:function(){return void 0!==win.jivo_version&&void 0!==win.jivo_config&&void 0!==win.jivo_init}}}return babelHelpers.createClass(a,[{key:"once",value:function(a,b){var c=void 0;return function(){return a&&(c=a.apply(b||this,arguments),a=null),c}}},{key:"escapeHtml",value:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"parseUri",value:function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol,hostname:b.hostname,port:b.port,path:b.hostname+b.pathname,pathname:b.pathname,search:b.search,query:this.parseQueryString(b.search.replace(/^\?/,"")),hash:b.hash,host:b.host}}},{key:"parseQueryString",value:function(a){var b={};return a.split("&").forEach(function(a){var c=a.split("=");0!==c[0].length&&c[1]&&(b[c[0]]=c[1])}),b}},{key:"makeQueryString",value:function(a,b){var c=["object","array"],d=[],e=b?b+"[%s]":"%s";for(var f in a)a.hasOwnProperty(f)&&(-1===c.indexOf(babelHelpers.typeof(a[f]).toLowerCase())?d.push(encodeURIComponent(e.replace("%s",f))+"="+encodeURIComponent(a[f])):d.push(cbh_ldr.helpers.makeQueryString(a[f],f)));return d.join("&")}},{key:"setLocaleProtocol",value:function(a,b){var c=a.replace(new RegExp("((?:https?)?(?::)?(?://)?)(.*)$","i"),"$1::$2"),d=loc.protocol+"//",e=c.split("::")[0],f=c.split("::")[1];return"https://"===d&&"http://"===e?f="https://"+f:""===e?f=d+f:(e="//"===e&&!0===b?d:e,f=e+f),f}},{key:"viewportSize",value:function(){var a=navigator.userAgent.toLowerCase(),b=a.indexOf("opera")>-1,c=!b&&a.indexOf("msie")>-1;return{width:!document.compatMode&&!c||b?(document.parentWindow||document.defaultView).innerWidth:"CSS1Compat"===document.compatMode?document.documentElement.clientWidth:document.body.clientWidth,height:!document.compatMode&&!c||b?(document.parentWindow||document.defaultView).innerHeight:"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}}},{key:"rand",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a>0?this.rand(a-1,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+b):b}},{key:"isMobile",value:function(){return deviceDetect(),win.device.mobile()&&!win.device.tablet()}},{key:"isTablet",value:function(){return deviceDetect(),win.device.tablet()}},{key:"isMobileEnabled",value:function(){var a=cbh_ldr.db_params||{};return!a||("callbackhunter"===win.location.hash.substring(1)||!func.dbParamIsEnabled(a.disable_mobile_widget))}},{key:"isNumber",value:function(a){return!isNaN(parseFloat(a))&&isFinite(a)}},{key:"isArray",value:function(a){return!this.isNull(a)&&"[object Array]"===Object.prototype.toString.call(a)}},{key:"isObject",value:function(a){return"object"===(void 0===a?"undefined":babelHelpers.typeof(a))&&!this.isEmpty(a)}},{key:"isBoolean",value:function(a){return"boolean"==typeof a}},{key:"isString",value:function(a){return"string"==typeof a}},{key:"isNull",value:function(a){return null===a&&"object"===(void 0===a?"undefined":babelHelpers.typeof(a))}},{key:"isFunction",value:function(a){var b={};return a&&"[object Function]"===b.toString.call(a)}},{key:"isDOMElement",value:function(a){
return"object"===("undefined"==typeof HTMLElement?"undefined":babelHelpers.typeof(HTMLElement))?a instanceof HTMLElement:a&&"object"===(void 0===a?"undefined":babelHelpers.typeof(a))&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}},{key:"isEmpty",value:function(a){if("object"===(void 0===a?"undefined":babelHelpers.typeof(a))){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}return this.isNull(a)||void 0!==a.length&&0===a.length}},{key:"isNumeric",value:function(a){return!isNaN(parseFloat(a))&&isFinite(a)}},{key:"isValidURL",value:function(a){var b=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return Boolean(b.test(a))}},{key:"phoneContainsRepeats",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return new RegExp("(.)\\1{"+(b-1)+",}","i").test(a.replace(/\D+/g,""))}},{key:"isValidPhone",value:function(a){if(func.dbParamIsEnabled(CBHCore.db_params.enable_masks)){if("string"!=typeof a||""===a||-1!==a.indexOf("_")||this.phoneContainsRepeats(a))return!1}else{if("string"!=typeof a||""===a||a.length<=10)return!1;if(this.phoneContainsRepeats(a))return!1}return!0}},{key:"saveName",value:function(a){CBHCore.user.setName(a),CBHCore.server.send({name:CBHCore.user.name})}},{key:"saveEmail",value:function(a){CBHCore.user.setEmail(a),CBHCore.server.send({email:CBHCore.user.email})}},{key:"saveEmailFallback",value:function(a){CBHCore.user.setEmailFallback(a),CBHCore.server.send({email_fallback:CBHCore.user.email_fallback})}},{key:"saveSkId",value:function(a,b){var c={sk_id:CBHCore.user.sk_id};void 0!==b&&b&&(c.begin_chat=1),CBHCore.user.setSkId(a),CBHCore.server.send(c)}},{key:"saveFbId",value:function(a){CBHCore.user.setFbId(a),CBHCore.server.send({fb_id:CBHCore.user.fb_id})}},{key:"saveVkId",value:function(a){CBHCore.user.setVkId(a),CBHCore.server.send({vk_id:CBHCore.user.vk_id})}},{key:"savePhoneFallback",value:function(a){CBHCore.user.setPhoneFallback(a),CBHCore.server.send({phone_fallback:CBHCore.user.client_phone_fallback})}},{key:"savePhone",value:function(a){CBHCore.user.setPhone(a),CBHCore.server.send({phone_main:CBHCore.user.client_phone})}},{key:"freeMode",value:function(){return!0===cbh_ldr.free_mode}},{key:"isGreetersAllowed",value:function(){return!0===cbh_ldr.greeters_allowed}},{key:"hasSms",value:function(){return!0===cbh_ldr.has_sms}},{key:"hasMinutesWoSubscription",value:function(){var a=cbh_ldr.db_params||{};return!!a&&(!func.dbParamIsEnabled(a.has_subscription)&&func.dbParamIsEnabled(a.has_minutes))}},{key:"hasSubscription",value:function(){var a=cbh_ldr.db_params||{};return!!a&&func.dbParamIsEnabled(a.has_subscription)}},{key:"brandingEnabled",value:function(){return!0}},{key:"validateEmail",value:function(a,b,c){return a&&a.email?0===a.email.length||-1===a.email.indexOf("@")||-1===a.email.indexOf(".")?b.email("validateEmail.error_invalid"):void c():b.email("validateEmail.error_empty")}},{key:"checkUtmDeny",value:function(){var a=void 0,b=void 0,c=decodeURIComponent(win.location.search.substring(1)),d=decodeURIComponent(cbh_ldr.user.referrer),e=decodeURIComponent(cbh_ldr.user.entrance_page)||"";if(null!==cbh_ldr.db_params&&(a=cbh_ldr.db_params),a&&func.dbParamIsEnabled(a.block_by_utm)&&null==a.utm_allowed)return!1;if(func.dbParamIsEnabled(a.allow_by_utm)&&null!=a.utm_negate){var f=a.utm_negate;for(b=0;b<f.length;b++)if(c.indexOf(f[b])>-1||e.indexOf(f[b])>-1||d.indexOf(f[b])>-1)return cbh_ldr.logErrorCode(12),!0}if(func.dbParamIsEnabled(a.block_by_utm)&&null!=a.utm_allowed){var g=a.utm_allowed;for(b=0;b<g.length;b++)if(c.indexOf(g[b])>-1||e.indexOf(g[b])>-1||d.indexOf(g[b])>-1)return!1}else if(!func.dbParamIsEnabled(a.block_by_utm))return!1;return cbh_ldr.logErrorCode(13),!0}},{key:"urlInBlacklist",value:function(){if(!func.dbParamIsEnabled(cbh_ldr.db_params.restrict_by_url)||void 0===cbh_ldr.db_params.url_restrict||0===cbh_ldr.db_params.url_restrict.length)return!1;try{for(var a=JSON.parse(cbh_ldr.db_params.url_restrict),b=0;b<a.length;b++){if((loc.pathname+loc.search).replace(/^\/|\/$/g,"")===a[b].replace(/^\/|\/$/g,""))return cbh_ldr.logErrorCode(15),!0;if("/"!==a[b]){if(new RegExp(a[b]).test(loc.pathname))return cbh_ldr.logErrorCode(15),!0}}}catch(a){}return!1}},{key:"urlInWhitelist",value:function(){var a=!0;if(!func.dbParamIsEnabled(cbh_ldr.db_params.apply_by_url)||void 0===cbh_ldr.db_params.url_apply||0===cbh_ldr.db_params.url_apply.length)return!0;try{var b=JSON.parse(cbh_ldr.db_params.url_apply);a=!1;for(var c=0;c<b.length;c++)if(loc.pathname.replace(/^\/|\/$/g,"")===b[c].replace(/^\/|\/$/g,""))a=!0;else if("/"!==b[c]){var d=new RegExp(b[c]);d.test(loc.pathname)&&(a=!0)}}catch(a){}return a||CBHCore.logErrorCode(14),a}},{key:"getTimeFromStart",value:function(){cbh_ldr.cookies.get("hunter_start")||cbh_ldr.helpers.setStartCookie();var a=cbh_ldr.cookies.get("hunter_start"),b=new StrongDate,c=b.getTime()-a.s,d=cbh_ldr.helpers.millisecondsToTime(c);return d[0]>=60&&(cbh_ldr.helpers.setStartCookie(),d[0]=0),d}},{key:"millisecondsToTime",value:function(a){var b=parseInt(a,10),c=Math.trunc(b/1e3%60),d=Math.trunc(b/6e4),e=0;return d>=60&&(e=Math.trunc(d/60),d=Math.trunc(d%60)),[d,c,e]}},{key:"getRandomInt",value:function(a,b){return Math.floor(Math.random()*(b-a+1))+a}},{key:"setStartCookie",value:function(){if(!cbh_ldr.cookies.get("hunter_start")){var a=new StrongDate;a.setHours(a.getHours()+1),cbh_ldr.cookies.set("hunter_start",{s:(new StrongDate).getTime()},{expires:a.toUTCString()})}}},{key:"prolongStartCookie",value:function(){var a=cbh_ldr.cookies.get("hunter_start");if(a){var b=new StrongDate;b.setHours(b.getHours()+1),cbh_ldr.cookies.set("hunter_start",a,{expires:b.toUTCString()})}}},{key:"savePositionCookie",value:function(a,b,c,d){if(void 0!==a&&void 0!==b){var e=d||cbh_ldr.version,f=e+"_"+(c||"");cbh_ldr.cookies.set("hunter_x_v"+f,a),cbh_ldr.cookies.set("hunter_y_v"+f,b)}}},{key:"getPositionCookie",value:function(a,b){var c=b||cbh_ldr.version,d=c+"_"+(a||""),e=cbh_ldr.helpers.viewportSize();return{X:cbh_ldr.helpers.clamp(cbh_ldr.cookies.get("hunter_x_v"+d),10,e.width),Y:cbh_ldr.helpers.clamp(cbh_ldr.cookies.get("hunter_y_v"+d),0,e.height)}}},{key:"clamp",value:function(a,b,c){return Math.max(b,Math.min(c,a))}},{key:"deprecatedReferer",value:function(){var a=!1;return!cbh_ldr.extensionMode&&cbh_ldr.db_params.block_by_yandex_market&&cbh_ldr.user.session_ref.match(/market\.yandex\.(.{2,}?)\//)&&(cbh_ldr.logErrorCode(16),a=!0),a}},{key:"dontShowWidget",value:function(){return cbh_ldr.helpers.checkUtmDeny()||!cbh_ldr.helpers.urlInWhitelist()||cbh_ldr.helpers.urlInBlacklist()||cbh_ldr.helpers.deprecatedReferer()}},{key:"extend",value:function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(c[e]=b[e]);return c}},{key:"addCSSRules",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(b&&CBHCore.helpers.isString(b)&&CBHCore.helpers.isArray(a))return CBHCore.helpers.addCSSRules(function(a,b){return a.reduce(function(a,c){return a[c]=b,a},{})}(a,b),null,c);for(var d in a)if(a.hasOwnProperty(d)){var e=d;c&&(d="."+c.replace(/^\./,"")+" "+d),cbh_ldr.helpers.addCSSRule(d,a[e])}}},{key:"addBodyClass",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a){var c=a.replace(/^\./,""),d=document.body.className.split(" ").filter(function(a){return""!==a&&-1===a.indexOf(c)});b?d.unshift(c):d.push(c),document.body.className=d.join(" ")}}},{key:"removeBodyClass",value:function(a){if(a){"string"==typeof a&&a.replace(/^\./,"");var b=document.body.className.split(" ").filter(function(b){return""!==b&&(("string"!=typeof a||b!==a)&&!(a instanceof RegExp&&a.test(b)))});document.body.className=b.join(" ")}}},{key:"compilePoweredBy",value:function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=cbh_ldr.db_params,e=a;if(this.empty(e)||!func.dbParamIsEnabled(d.show_powered_by))return"";var f=void 0,g=void 0,h=this.empty(d.domain)?"":d.domain,i=this.empty(d.f_label)?"":d.f_label;if(cbh_ldr.extensionMode)e="extension_powered_by",f=__(e+".default_link"),g=__(e+".default_text");else{if(this.empty(d.powered_by_link))if(i||h){var j=cbh_ldr.helpers.parseUri(__(e+".default_link"));f=(h||j.hostname)+"/"+i}else f=__(e+".default_link");else f=d.powered_by_link;b&&f.match(/^(http(s)?:\/\/)?(www\.)?callbackhunter.com/)&&(f.match(/([?&])utm_source=/)?c&&(f=f.replace(/([?&])utm_source=.*?(&|$)/,"$1utm_source="+b+"$2")):f+="?utm_source="+b),this.empty(d.affiliate_link)||(f+="#a_aid="+d.affiliate_link),g=this.empty(d.powered_by_text)?__(e+".default_text"):d.powered_by_text}var k={link:f,text:g};return/^https?:\/\//i.test(k.link)||(k.link="http://"+k.link),__(e+".tpl",k)}},{key:"prependHTTP",value:function(a){return/^https?:\/\//i.test(a)?a:"http://"+a}},{key:"isset",value:function(){for(var a=void 0,b=0,c=arguments,d=c.length,e=String(a);b!==d;){if(c[b]===a||babelHelpers.typeof(c[b])===e||null===c[b])return!1;b++}return!0}},{key:"empty",value:function(){for(var a=void 0,b=0,c=arguments,d=c.length,e=String(a),f=[a,!1,0,"","0"],g=f.length;b!==d;){for(var h=0;h<g;h++)if(babelHelpers.typeof(c[b])===e||c[b]===f[h])return!0;b++}return!1}},{key:"objectToUrlParameters",value:function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}},{key:"getEndpointProtocol",value:function(){return"string"==typeof cbh_ldr.opt.endpoint_protocol?cbh_ldr.opt.endpoint_protocol:"https:"===loc.protocol?"https:":"http:"}},{key:"getEndpointURL",value:function(){return cbh_ldr.helpers.getEndpointProtocol()+"//"+cbh_ldr.opt.endpoint}},{key:"throttle",value:function(a,b,c){var d=b||250,e=void 0,f=void 0;return function(){var b=c||this,g=Number(new Date),h=arguments;e&&g<e+d?(clearTimeout(f),f=setTimeout(function(){e=g,a.apply(b,h)},d)):(e=g,a.apply(b,h))}}},{key:"getOfficeList",value:function(a){var b=void 0,c=void 0,d=[],e=a?CBHCore.offices.getChildren(a):CBHCore.offices.getAll();for(var f in e)e.hasOwnProperty(f)&&(c=e[f],b="","string"==typeof c.promt&&(b=JSON.parse(c.promt),void 0!==b[CBHCore.lang.langCode]?b=b[CBHCore.lang.langCode]:void 0!==b[CBHCore.lang.defLangCode]&&(b=b[CBHCore.lang.defLangCode])),(void 0===a&&CBHCore.helpers.isNull(c.parent_id)||void 0===a&&void 0===c.parent_id||void 0!==a&&c.parent_id===a)&&d.push({promt:b,id:c.id,name:c.name,phone:c.phone}));return d}},{key:"getIEVersion",value:function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");if(b>0)return parseInt(a.substring(b+5,a.indexOf(".",b)),10);if(a.indexOf("Trident/")>0){var c=a.indexOf("rv:");return parseInt(a.substring(c+3,a.indexOf(".",c)),10)}var d=a.indexOf("Edge/");return d>0&&parseInt(a.substring(d+5,a.indexOf(".",d)),10)}},{key:"logError",value:function(a){var b=this.extend({msg:a},{ua:win.navigator.userAgent||"",hunter_code:CBHCore.hunter_code||""});cbh_ldr.server.send(b,cbh_ldr.opt.errorWebhookUrn)}},{key:"isIOS",value:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}},{key:"isWindowsPhone",value:function(){return!!navigator.userAgent.match(/Windows Phone/i)||(!!navigator.userAgent.match(/iemobile/i)||!!navigator.userAgent.match(/WPDesktop/i))}},{key:"browser",value:function(){var a=navigator.userAgent;return a.indexOf("CriOS")>-1?"chrome":a.indexOf("Chrome")>-1?"chrome":a.indexOf("YaBrowser")>-1?"yabrowser":a.indexOf("Safari")>-1?"safari":a.indexOf("Firefox")>-1?"firefox":a.indexOf("Edge")>-1?"edge":a.indexOf("MSIE")>-1?"ie":a.indexOf("Trident")>-1?"ie11":a.indexOf("Opera")>-1?"opera":a.indexOf("OPR")>-1?"operaWebkit":a.indexOf("Maxthon")>-1?"maxthon":"browser"}},{key:"createDummyImage",value:function(){return window.Image?new Image:document.createElement("img")}},{key:"isExternalSettingsFunction",value:function(a){return"object"===babelHelpers.typeof(cbh_ldr.external_settings)&&!this.isNull(cbh_ldr.external_settings)&&"string"==typeof cbh_ldr.external_settings[a]&&this.isFunction(win[cbh_ldr.external_settings[a]])}},{key:"getExternalSetting",value:function(a,b){if("object"===babelHelpers.typeof(cbh_ldr.external_settings)&&!cbh_ldr.helpers.isNull(cbh_ldr.external_settings)){if(void 0===b)return cbh_ldr.external_settings[a];if(babelHelpers.typeof(cbh_ldr.external_settings[a])===b)return cbh_ldr.external_settings[a]}return null}},{key:"getDataCollectionUrl",value:function(a){var b=cbh_ldr.db_params.data_process_popup_url||a;return b&&!b.match(/^https?:\/\/.+/)&&(b="http://"+b),b}},{key:"performPolicyText",value:function(a){var b=a;return"ff298bfad66d555e145dca5c458c9aad"===cbh_ldr.db_params.hunter_code&&a&&a.length>0&&(b=b.replace(/КБХ/,"сервиса"),b=b.replace(/KBKH/,"service")),["f188a1af212a469b270a635561412a94","0e734b056cc8c6239c2abf67cf3da57a"].indexOf(cbh_ldr.db_params.hunter_code)>-1&&(b="data_process_popup_url"in cbh_ldr.db_params&&cbh_ldr.db_params.data_process_popup_url?'<span class="cbh__policy-links-wrapper">Даю согласие на обработку персональных данных <a href="'+cbh_ldr.db_params.data_process_popup_url+'" rel="noopener" target="_blank">ООО «ДК РУС»</a> и <a href="https://callbackhunter.com/img/terms_of_use.pdf?v=1" rel="noopener" target="_blank">«КБХ»</a></span>':'<span class="cbh__policy-links-wrapper">Даю согласие на обработку персональных данных ООО «ДК РУС» и <a href="https://callbackhunter.com/img/terms_of_use.pdf?v=1" rel="noopener" target="_blank">«КБХ»</a></span>'),b}},{key:"getWidgetMode",value:function(){var a="low",b=func.dbParamIsEnabled(cbh_ldr.db_params.show_once),c=func.dbParamIsEnabled(cbh_ldr.db_params.show_once_session);return b||c?b&&!c?a="middle":b&&c&&(a="low"):a="high",a}},{key:"checkIfCatchingAvailable",value:function(a){return cbh_ldr.cookies.get("hunter_catching")!==a&&this.hasSubscription()}},{key:"setCatchingCookie",value:function(a){var b=0,c=new StrongDate;"high"===a?b="":"middle"===a?(c.setHours(c.getHours()+24),b=c.toUTCString()):"low"===a&&(c.setHours(c.getHours()+168),b=c.toUTCString()),cbh_ldr.cookies.set("hunter_catching",a,{expires:b})}}]),a}();Helpers.prototype.addCSSRule=function(){var a=document.createElement("style");document.head.appendChild(a);var b=a.sheet;return function(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=null;try{return"insertRule"in b?e=b.insertRule(a+"{"+c+"}",d):"addRule"in b&&(e=b.addRule(a,c,d)),function(){"deleteRule"in b?b.deleteRule(e):"removeRule"in b&&b.removeRule(e)}}catch(a){}}}(),cbh_ldr.helpers=new Helpers;var showReasons=Object.freeze({BUTTON:1,ENTER:2,EXIT:3,AUTOCALLBACK:4,TOP_PANEL:5,JS_API:6,WILD:7,AUTO_WILD:8,BANNER:9,GREETER_BANNER:10,GREETER_SLIDER:11,GREETER_BUILTIN:12});cbh_ldr.showReasons=showReasons;var Logger=function(){function a(){babelHelpers.classCallCheck(this,a)}return babelHelpers.createClass(a,[{key:"debug",value:function(a,b,c){if(!0===c)return console.log(a),!0;if(!cbh_ldr.opt.dev_mode)return!1;if(void 0!==b&&!cbh_ldr.helpers.isEmpty(b)){if(void 0!==cbh_ldr.opt.debug_scope&&cbh_ldr.helpers.isEmpty(cbh_ldr.opt.debug_scope))return!1;if("*"!==cbh_ldr.opt.debug_scope&&-1===cbh_ldr.opt.debug_scope.indexOf(b))return!1}return console.log(a),!0}}]),a}();cbh_ldr.logger=new Logger;var Api=function(){function a(){var b=this;babelHelpers.classCallCheck(this,a),this.baseApi2Url="/api/v2/",this.GREETERS_STORAGE_KEY="db_greeters",this.GREETERS_TIME_STORAGE_KEY="db_greeters_update_time",setInterval(function(){return processQueue(b.sendCall.bind(b))},300)}return babelHelpers.createClass(a,[{key:"sendCall",value:function(a){if("string"!=typeof a.phone||""===a.phone)throw new Error("CBH: phone number must be a non-empty string");if(!cbh_ldr.db_params&&a)return void toQueue(a);var b=cbh_ldr.helpers.extend({phone:null,phone_manager:null,name:cbh_ldr.user.name||"",timestamp:null,office_id:null,call_asap:0,call_asap_delay:0,call_asap_spread:20,call_from_banner:null,filter_id:0},a);if(!cbh_ldr.db_params){var c=[],d=cbh_ldr.storage.get("db_params","session");"undefined"!=typeof cbh_db_error&&c.push("cbh_db_error: "+cbh_db_error),c.push("db_params_type: "+babelHelpers.typeof(cbh_ldr.db_params)),c.push("db_params_type: "+(cbh_ldr.helpers.isNull(cbh_ldr.db_params)?"null":"not null")),c.push("db_params_update_time: "+cbh_ldr.storage.get("db_params_update_time","session")),c.push("db_params_storage: "+d),CBHCore.helpers.logError(c.join(","))}var e=cbh_ldr.helpers.rand(16),f={phone:b.phone,phone_manager_tracked:b.phone_manager||cbh_ldr.callTracking.catchManagerPhone()||"",client_name:b.name||"",wp_code:void 0===cbh_ldr.db_params.wp_code?"":cbh_ldr.db_params.wp_code,lang:cbh_ldr.lang.langCode,office_id:b.office_id,call_rand_id:e,widget_show_reason:b.call_from_banner?9:6,url:win.location.href,call_asap:b.call_asap,call_asap_delay:b.call_asap_delay,call_asap_spread:b.call_asap_spread,call_from_banner:b.call_from_banner,filter_id:b.filter_id};cbh_ldr.helpers.isNull(b.timestamp)||(f=cbh_ldr.helpers.extend(f,{call_asap:0,night_time:1e3*a.timestamp,user_date:JSON.stringify({utc:(new Date).toUTCString(),local:String(new Date),utc_strong:(new StrongDate).toUTCString(),local_strong:(new StrongDate).toString()})})),cbh_ldr.server.send(f)}},{key:"getUser",value:function(){return{name:cbh_ldr.user.name,phone:cbh_ldr.user.phone,email:cbh_ldr.user.email}}},{key:"getOfficeList",value:function(){return cbh_ldr.db_params.show_office_list&&cbh_ldr.helpers.isArray(cbh_ldr.db_params.show_office_list)?cbh_ldr.db_params.show_office_list:[]}},{key:"startGreeters",value:function(a,b){return a&&(CBHCore.EventEmitter.emit("core.greeters.rawDataReceived",a),cbh_ldr.loadGreetersJS()),CBHCore.helpers.isFunction(b)?b():null}},{key:"getActiveGreeters",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,d=this.startGreeters,e=cbh_ldr.storage.get(this.GREETERS_TIME_STORAGE_KEY,"session"),f=null;if(e&&(new Date).getTime()-e<=1e3*cbh_ldr.opt.storage_cache_lifetime&&(f=cbh_ldr.storage.get(this.GREETERS_STORAGE_KEY,"session")||null),null!==f)return CBHCore.logger.debug({greetersRawDataCached:f}),d(f,a);CBHCore.server.ajax({url:CBHCore.helpers.getEndpointProtocol()+"//"+CBHCore.opt.endpoint+this.baseApi2Url+"external/widgets/"+CBHCore.hunter_code+"/greeters",data:{limit:c},type:"get",async:!0,crossDomain:!0,dataType:"json",result:function(c){return CBHCore.logger.debug({greetersRawData:c}),c&&(cbh_ldr.storage.save(b.GREETERS_TIME_STORAGE_KEY,(new Date).getTime(),"session"),cbh_ldr.storage.save(b.GREETERS_STORAGE_KEY,c,"session")),d(c,a)}})}},{key:"getGreeterByUid",value:function(a,b){CBHCore.server.ajax({url:CBHCore.helpers.getEndpointProtocol()+"//"+CBHCore.opt.endpoint+this.baseApi2Url+"external/widgets/"+CBHCore.hunter_code+"/greeters/"+a,type:"get",async:!0,crossDomain:!0,dataType:"json",result:function(a){if(CBHCore.logger.debug({greeterRawData:a}),CBHCore.helpers.isFunction(b))return b(a)}})}}]),a}();cbh_ldr.api=new Api;var Offices=function(){function a(){babelHelpers.classCallCheck(this,a)}return babelHelpers.createClass(a,[{key:"getAll",value:function(){var a={};if(0===Object.keys(a).length){var b=cbh_ldr.params.offices;cbh_ldr.params.hasCustomOffices&&(b=cbh_ldr.params.customOffices);for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}return a}},{key:"getById",value:function(a){var b=this.getAll();return!!b.hasOwnProperty(a)&&b[a]}},{key:"getParent",value:function(a){var b=this.getById(a),c=b.hasOwnProperty("parent_id")?b.parent_id:0;return 0!==c&&this.getById(c)}},{key:"getChildren",value:function(a){var b=[],c=this.getAll(),d=void 0;for(var e in c)c.hasOwnProperty(e)&&(d=this.getById(e),d.parent_id===a&&b.push(d));return b}},{key:"getNextActionName",value:function(a){var b=void 0,c=void 0;b=void 0===a?this.getById([Object.keys(this.getAll())[0]]):this.getChildren(a).shift();try{c=JSON.parse(b.promt)}catch(a){return""}return c.hasOwnProperty(cbh_ldr.user.language)?c[cbh_ldr.user.language]:""}},{key:"isCity",value:function(a){var b=this.getChildren(a);return 0===b.length||0===this.getChildren(b.shift().id).length}},{key:"isParent",value:function(a){return 0!==this.getChildren(a).length}}]),a}();cbh_ldr.offices=new Offices;var User=function(){function a(b){babelHelpers.classCallCheck(this,a),this.location=b.storage.get("location","local")||null,this.session_id=null,this.name=null,this.email=null,this.email_fallback=null,this.client_phone=null,this.client_phone_fallback=null,this.gameResults={},this.language=null,this.domain=loc.hostname.replace(/^www\./i,""),this.url=loc.href,this.referrer=b.storage.get("ref","local")||doc.referrer||"",this.session_ref=b.cookies.get("hunter_session_ref")||doc.referrer||"",this.entrance_page=b.storage.get("entrance_page","local")||loc.href||"",this.entrance_time=b.storage.get("entrance_time","session")||(new Date).getTime(),this.last_page_with_utm="",this.custom_cookie=null,this.calls=null,this.sk_id=null,this.fb_id=null,this.vk_id=null,this.tg_id=null,this.vb_id=null,this.sk_avatar=null,this.fb_avatar=null,this.vk_avatar=null,this.tg_avatar=null,this.vb_avatar=null,this.cbh=b}return babelHelpers.createClass(a,[{key:"defineLastPageWithUtm",value:function(){var a="hunter_last_page_with_utm";if(/(&|\?)utm_(medium|source|campaign|term|content)/i.test(loc.href))return this.cbh.cookies.set(a,loc.href,{expires:""}),void(this.last_page_with_utm=loc.href);var b=this.cbh.cookies.get(a);b&&(this.last_page_with_utm=b)}},{key:"init",value:function(){this.initSid(),this.getStorageData(),this.defineLastPageWithUtm(),this.setReferer(),this.initUserData(),this.initHTrk(),this.initCustomCookie(),this.embedPixel()}},{key:"initSid",value:function(){void 0!==this.cbh.db_params.hunter_sid&&(this.session_id=this.cbh.db_params.hunter_sid,this.cbh.cookies.set("hunter_sid",this.session_id,{expires:365}),this.cbh.storage.save("hunter_sid",this.session_id))}},{key:"initUserData",value:function(){var a=this;this.cbh.logger.debug({phoneSubstitution:this.cbh.helpers.hasSubscription()},"bigdata"),this.client_phone=this.cbh.helpers.hasSubscription()?this.getUserDataField("phone"):null,this.client_phone_fallback=this.cbh.helpers.hasSubscription()?this.getUserDataField("phone_fallback"):null,this.setKnownPhone(),this.name=this.getUserDataField("name"),this.email=this.getUserDataField("email"),this.email_fallback=this.getUserDataField("email_fallback"),this.calls=this.getUserDataField("calls"),["vk","fb","vb","tg","sk"].forEach(function(b){var c=b+"_id",d=b+"_avatar";a[c]=a.getUserDataField(c),a[d]=a.getUserDataField(d)})}},{key:"getUserData",value:function(){return{name:this.name,email:this.email,client_phone:this.client_phone,entrance_time:this.entrance_time}}},{key:"getUserDataField",value:function(a){return this.cbh.helpers.isObject(this.cbh.db_params.client_data)&&void 0!==this.cbh.db_params.client_data[a]?this.cbh.db_params.client_data[a]:null}},{key:"getStorageData",value:function(){this.referrer=this.cbh.storage.get("ref","local")||doc.referrer||"",this.entrance_page=this.cbh.storage.get("entrance_page","local")||loc.href||""}},{key:"setReferer",value:function(){var a=/^(http(s)?:\/\/)?(www\.)?/,b=doc.referrer,c=b&&0!==b.replace(a,"").indexOf(this.domain);c&&(this.cbh.storage.save("ref",b,"local"),this.cbh.cookies.set("hunter_session_ref",b,{expires:""}),this.referrer=b),this.referrer&&!c||(this.entrance_page=this.url,this.cbh.storage.save("entrance_page",this.url,"local"))}},{key:"setName",value:function(a){if("string"!=typeof a||!a)return!1;this.name=a}},{key:"setEmail",value:function(a){if("string"!=typeof a||!a)return!1;this.email=a}},{key:"setEmailFallback",value:function(a){if("string"!=typeof a||!a)return!1;this.email_fallback=a}},{key:"setPhone",value:function(a){if("string"!=typeof a||!a)return!1;var b=this.cbh.storage.get("db_params","session");b&&(void 0===b.client_data&&(b.client_data={}),b.client_data.phone=a,this.cbh.storage.save("db_params",b,"session")),this.client_phone=a,this.setKnownPhone()}},{key:"setPhoneFallback",value:function(a){if("string"!=typeof a||!a)return!1;this.client_phone_fallback=a}},{key:"setKnownPhone",value:function(){this.client_phone?this.cbh.cookies.set("hunter_known_p",1,{expires:365}):this.cbh.cookies.delete("hunter_known_p")}},{key:"setLocation",value:function(a){if("object"!==(void 0===a?"undefined":babelHelpers.typeof(a))||!a)return!1;this.location=a,this.cbh.storage.save("location",a,"local")}},{key:"setSkId",value:function(a){if("string"!=typeof a||!a)return!1;this.sk_id=a}},{key:"setFbId",value:function(a){if("string"!=typeof a||!a)return!1;this.fb_id=a}},{key:"setVkId",value:function(a){this.vk_id=a}},{key:"embedPixel",value:function(){}},{key:"initHTrk",value:function(){var a=["n","p","e","yid","gid"],b=CBHCore.cookies.get("hunter_trk"),c=!1,d=[];if(d.d=win.location.hostname,d.n=this.name,d.p=this.client_phone,d.e="",d.yid=this.cbh.cookies.get("yandexuid")||"",d.gid=function(){var a="";try{win.ga&&win.ga.create&&(a=win.ga.getAll()[0].get("clientId"))}catch(a){}return a}()||"",b){if(b=b.split("#"),2===b.length&&b[1].length)for(var e=0;e<a.length;e++)d[a[e]]&&-1===b[1].indexOf(a[e]+";")&&(c=!0)}else c=!0;if(c&&this.session_id){for(var f=new StrongDate,g=f.getTime()+"#",h=0;h<a.length;h++)g+=d[a[h]]?a[h]+";":"";f.setDate(f.getDate()+730),this.cbh.cookies.set("hunter_trk",g,{expires:f}),(new Image).src="https://stat.callbackhunter.com/?sid="+this.session_id+"&"+this.cbh.helpers.makeQueryString(d)}}},{key:"initCustomCookie",value:function(){if(!this.cbh.db_params.custom_cookie)return!1;this.custom_cookie=JSON.stringify(this.cbh.cookies.get(this.cbh.db_params.custom_cookie))}}]),a}();cbh_ldr.user=new User(cbh_ldr),cbh_ldr.wild=function(a){function b(a){if(k=[],"function"==typeof a)return a(k)}function c(){var a="",b=[],c=["q","query","text","s","search","request","search_query"];return[win.location.search,win.location.hash].forEach(function(d){a.length>0||d.substr(1).split("&").forEach(function(d){b=d.split("="),c.indexOf(b[0])>=0&&(a=decodeURIComponent(b[1]))})}),a}function d(a){var b=!1;return void 0!==k[a]&&k[a].showing&&(b=!0),b}function e(a){void 0!==k[a]&&(k[a].showing=!0)}function f(a,b){var c=void 0;c=CBHCore.helpers.isNull(a)?{data:JSON.stringify(k.map(function(a){return{wild_id:a.id,record:a.record,record_type:a.record_type}})),url:CBHCore.user.url,session_id:CBHCore.user.session_id}:{wild_id:a.id,record:a.record,record_type:a.record_type,url:CBHCore.user.url,session_id:CBHCore.user.session_id},CBHCore.server.ajax({url:cbh_ldr.helpers.getEndpointProtocol()+"//"+CBHCore.opt.endpoint+"/hunter/wildstat",type:"get",async:!0,crossDomain:!0,dataType:"json",data:c,result:function(a){if(CBHCore.helpers.isFunction(b))return b(a)}})}function g(a){var b=void 0,c=void 0,d=!1;for(b in k)if(k.hasOwnProperty(b)&&(c=k[b],c.id===a)){d=c;break}return d}var h=!1,i=!1,j=loc.href,k=[],l={};return win.setInterval(function(){loc.href!==j&&(k=[],i=!1,h=!1,b(),j=loc.href)},500),{init:b,searchQuery:c,ad:function(a){return k[a]},timerAd:function(){return l},ads:function(){return k},ready:function(){return i},stat:f,isShowing:d,setShowing:e,getAdById:g}}();var CallTracking=function(){function a(){babelHelpers.classCallCheck(this,a),this.manager_phone="",this.manual_setup=!1,this.custom_number_call=!1}return babelHelpers.createClass(a,[{key:"setManagerPhone",value:function(a,b,c){var d=cbh_ldr.db_params;(void 0!==b&&!0===b||void 0!==d.created_way&&"chrome"===d.created_way&&func.dbParamIsEnabled(d.phone_track_enable))&&(this.manager_phone=a?"+"+a.replace(/[^0-9]/g,""):"",this.manual_setup=!0,void 0!==c&&c&&(this.custom_number_call=!0))}},{key:"catchManagerPhone",value:function(){if(!cbh_ldr.db_params)return"";if(this.manager_phone&&this.manual_setup)return this.manager_phone;var a="",b=null,c=cbh_ldr.db_params,d=cbh_ldr.is_mobile?c.m_phone_track_whereis:c.phone_track_whereis,e=d.slice(0,1);if(!func.dbParamIsEnabled(c.phone_track_enable))return this.manager_phone;for(var f=["calltouch_phone","calltouch_phone_1","calltouch_phone_2"],g=0;g<f.length;g++)if("string"==typeof win[f[g]])return this.manager_phone="+"+win[f[g]].replace(/[^0-9]/g,""),this.manager_phone;if("string"!=typeof c.phone_track_whereis)return this.manager_phone;if("string"==typeof c.phone_track_prefix&&(a=c.phone_track_prefix),"#"===e)b=doc.getElementById(d.substring(1));else{if("."!==e)return this.manager_phone;var h=doc.getElementsByClassName(d.substring(1));h&&void 0!==h[0]&&(b=h[0])}if(!b)return this.manager_phone;var i=(b.innerText||b.textContent).replace(/[^0-9]/g,"");return i.length&&(this.manager_phone="+"+a.replace(/[^0-9]/g,"")+i),this.manager_phone}}]),a}();cbh_ldr.callTracking=new CallTracking;var Telemetry=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.data={},a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"start",value:function(a){if(!CBHCore.extensionMode){var b=Sweety(),c=this.addEvent.bind(this),d=["click","mouseover","mouseout","contextmenu","keypress"],e=function(){return"onmousewheel"in document?"mousewheel":"onwheel"in document?"wheel":"DOMMouseScroll"}();d.forEach(function(a){b(win).on(a,CBHCore.helpers.throttle(c,2e3))}),b("input").on("focus",CBHCore.helpers.throttle(c,2e3)),b(doc).on(e,CBHCore.helpers.throttle(c,2e3)),a>3&&setTimeout(this.send.bind(this),3e3),setInterval(this.send.bind(this),1e3*a)}}},{key:"addUserData",value:function(){this.data.browser=navigator.appName+";"+navigator.appVersion+";"+navigator.userAgent+";"+navigator.cookieEnabled,this.data.screen=screen.availWidth+";"+screen.availHeight+";"+screen.colorDepth,this.data.date=new Date,this.data.href=loc.href}},{key:"addEvent",value:function(a){this.data[a.type]||(this.data[a.type]=[]),this.data[a.type]=JSON.stringify({type:a.type,x:a.x,y:a.y}),(this.data.keypress||this.data.focus)&&this.emit("inputFocus"),"DOMMouseScroll"!==a.type&&"mousewheel"!==a.type&&"wheel"!==a.type&&"onmousewheel"!==a.type||this.emit("activity")}},{key:"send",value:function(){CBHCore.helpers.isEmpty(this.data)||(this.addUserData(),"string"==typeof cbh_ldr.opt.telemetry_urn?CBHCore.server.send(this.data,cbh_ldr.opt.telemetry_urn):CBHCore.server.send(this.data),this.reset())}},{key:"reset",value:function(){this.data={}}}]),b}(EventEmitter);cbh_ldr.telemetry=new Telemetry;var Server=function(){function a(){babelHelpers.classCallCheck(this,a)}return babelHelpers.createClass(a,[{key:"get",value:function(a){var b=insertIEVersion();cbh_ldr.hunter_code?b.hcode=cbh_ldr.hunter_code:b.domain=cbh_ldr.user.domain,b.session_id=cbh_ldr.user.session_id||cbh_ldr.cookies.get("hunter_sid")||cbh_ldr.storage.get("hunter_sid"),b.url=cbh_ldr.user.url,b.param=1,b.extension_mode=Number(cbh_ldr.extensionMode),cbh_ldr.user.referrer&&(b.referer=cbh_ldr.user.referrer);var c=cbh_ldr.helpers.getEndpointProtocol()+"//"+cbh_ldr.opt.endpoint+"/_hunter/?"+cbh_ldr.helpers.makeQueryString(b);cbh_ldr.loadFile("js",c,!1,a)}},{key:"send",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!CBHCore.extensionMode||void 0===a.open&&void 0===a.close&&void 0===a.tmp_visit){var e=d&&b?"post":"get",f=b||"/hunter/",g={};if("string"==typeof a){if(g=cbh_ldr.helpers.parseQueryString(a),0===Object.keys(g).length)try{g=JSON.parse(a)}catch(a){}}else g=cbh_ldr.helpers.extend(g,a);this.ajax({url:cbh_ldr.helpers.getEndpointProtocol()+"//"+cbh_ldr.opt.endpoint+f,type:e,async:!0,crossDomain:!0,dataType:"json",data:cbh_ldr.helpers.extend(prepare_required_params(),g),result:function(a){cbh_ldr.helpers.isFunction(c)&&c(a)}})}}},{key:"ajax",value:function(a){if(!cbh_ldr.helpers.empty(a.url)){var b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=XMLHttpRequest,i={},j=["GET","POST","PUT"],k=["json","text"],l={},m="Msxml2.XMLHTTP",n={url:a.url||!1,async:a.async||!1,data:a.data||null,
crossDomain:a.crossDomain||!1,complete:a.result||function(){},timeout:a.timeout||3e4,type:(a.type&&-1!==j.indexOf(a.type.toUpperCase())?a.type.toUpperCase():null)||"GET",dataType:(a.dataType&&-1!==k.indexOf(a.dataType.toLowerCase())?a.dataType.toLowerCase():null)||"json"};void 0===h&&(h=function(){var a=void 0;try{a=ActiveXObject}catch(a){}try{return new a(m+".6.0")}catch(a){}try{return new a(m+".3.0")}catch(a){}try{return new a(m)}catch(a){}throw new Error("This browser does not support XMLHttpRequest.")});var o=new("onload"in new h?h:XDomainRequest);if(d=n.url,"string"==typeof n.data)try{n.data=JSON.parse(n.data)}catch(a){}"object"===babelHelpers.typeof(n.data)&&(n.data=insertIEVersion(n.data),n.data=cbh_ldr.helpers.makeQueryString(n.data)),"GET"===n.type&&n.data&&n.data.length>0&&(d=n.url+"?"+n.data.toString()),o.open(n.type,d,n.async),n.crossDomain||(l["X-Requested-With"]="XMLHttpRequest");for(b in l)l.hasOwnProperty(b)&&l[b]&&o.setRequestHeader(b,String(l[b]));n.data&&n.data.toString().length>0&&(o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.data=n.data.toString());try{o.send(n.data||null)}catch(a){}var p=void 0;if(n.async&&(p=setTimeout(function(){o.abort()},n.timeout)),g=function(){if(4===o.readyState)if(n.async&&clearTimeout(p),g="undefined",4===o.readyState){e=o.status,"string"==typeof o.responseText&&(i.text=o.responseText);try{f=o.statusText}catch(a){f=""}e||n.crossDomain?1223===e&&(e=204):e=i.text?200:404}else o.abort();if(i&&(e||n.crossDomain?1223===e&&(e=204):e=i.text?200:404,200===e)){if("text"===n.dataType)c=i.text||"";else if("json"===n.dataType)try{c=JSON.parse(i.text)||""}catch(a){c=""}n.complete(c,e,f,o.getAllResponseHeaders())}},!n.async)return g();4===o.readyState?setTimeout(g,20):o.onreadystatechange=g}}}]),a}();cbh_ldr.server=new Server;var __=function(a,b){return cbh_ldr.lang.translate(a,b)},Lang=function(){function a(){babelHelpers.classCallCheck(this,a),this.avail_lang={v2:["ru","en","bg","de","es","zh","ms","pl","id","ko","th","hu","fr","ar","hi","vi","ja","pt","it","lt","lv","no","et","uk","cs","ka","ro","md"],v3:["ru","en","fr","de","lv","lt"],v5:["ru","en","he","zh","ar","es","no","pl","de"],v7:["ru"],v8:["ru"],v9:["ru"],v10:["ru","en","uk"],m8:["ru"],m1:["ru","en","de"]},this.langCode="",this.defLangCode="en",this.languages={},this.filter_id=0,this.version=2,this.versionName="v2",this.locales={ru:"ru","ru-ru":"ru",bg:"bg",de:"de","de-de":"de",en:"en","en-us":"en","en-gb":"en",es:"es","es-es":"es",zh:"zh",ms:"ms",pl:"pl",id:"id",ko:"ko",th:"th",hu:"hu",fr:"fr",ar:"ar",hi:"hi",vi:"vi",ja:"ja",pt:"pt",it:"it",lt:"lt",lv:"lv",no:"no",nor:"no","no-no":"no",no_NO:"no",et:"et",ua:"uk",cs:"cs"}}return babelHelpers.createClass(a,[{key:"init",value:function(a){var b=this;this.version=cbh_ldr.version,cbh_ldr.mobile_v3_force?this.versionName="v3":CBHCore.helpers.isMobile()&&"5"===cbh_ldr.version||cbh_ldr.mobile_nextgen?this.versionName="m1":this.versionName="v"+this.version,this.langCode=cbh_ldr.langFromGet||this.detectLanguage(cbh_ldr.db_params.language),-1===this.avail_lang[this.versionName].indexOf(this.langCode)&&(this.langCode=this.defLangCode),this.babelfish=new Babelfish(this.defLangCode),this.langCode||(this.langCode=this.defLangCode),-1!==["7","8","9"].indexOf(this.version)&&(this.langCode="ru"),MConf({lang:this.langCode}),this.loadLang(this.defLangCode,function(){b.loadLang(b.langCode,a)}),cbh_ldr.user.language=this.detectLanguage("auto")}},{key:"translate",value:function(a,b,c){var d="cbh."+a,e=b,f=c||this.langCode;if(!this.babelfish.hasPhrase(f,d))return a;var g=this.getFilteredLangRawValue(a);return"string"==typeof g&&""!==g&&(e=this.applyDefaultLangVariables(e)),this.babelfish.translate(f,d,e)}},{key:"getFilteredLangRawValue",value:function(a){var b=a.split("."),c=this.filteredMessages||null;try{for(var d=0;d<b.length;d++){if(!c||!c.hasOwnProperty(b[d]))return null;c=c[b[d]]}}catch(a){return console.log("Error finding filtered lang val "+a.name+":"+a.message),null}return c}},{key:"applyDefaultLangVariables",value:function(a){var b=a||{};return void 0===b.countdown&&CBHCore.db_params&&CBHCore.db_params.time_connection&&(b.countdown=CBHCore.db_params.time_connection),b}},{key:"addLang",value:function(a){for(var b in a)a.hasOwnProperty(b)&&void 0!==b&&void 0!==a[b]&&"object"===babelHelpers.typeof(a[b])&&(this.languages[b]=!0,this.babelfish.addPhrase(b,"cbh",a[b]))}},{key:"addLangRow",value:function(a,b,c){var d=c||this.langCode;this.languages[d]&&this.babelfish.addPhrase(d,"cbh."+a,b)}},{key:"addAvailLang",value:function(a){for(var b in a)a.hasOwnProperty(b)&&void 0===this.avail_lang[a[b]]&&this.avail_lang.push(a[b])}},{key:"detectLanguage",value:function(a){if("auto"===a){var b=this.getLocale();return b?this.locales[b.toLowerCase()]||this.locales[b.toLowerCase().substr(0,2)]:""}return a}},{key:"getLocale",value:function(){var a=void 0;return win.navigator&&(a=win.navigator.userLanguage||win.navigator.language||win.navigator.browserLanguage||win.navigator.systemLanguage),a}},{key:"loadLang",value:function(a,b){var c=void 0,d=cbh_ldr.opt.versions[cbh_ldr.lang.versionName];if(cbh_ldr.helpers.isMobile()&&void 0!==d.mobile&&void 0!==d.mobile.lang?c="//"+cbh_ldr.opt.static_domain+d.mobile.lang:void 0!==d.desktop&&void 0!==d.desktop.lang?c="//"+cbh_ldr.opt.static_domain+d.desktop.lang:void 0===d.lang?(c="//"+cbh_ldr.opt.static_domain+"/widgets/"+cbh_ldr.lang.versionName,!0===cbh_ldr.opt.use_dev_language?c+="/dev/i18n/":c+="/js/i18n/"):c="//"+cbh_ldr.opt.static_domain+d.lang,!0===cbh_ldr.opt.use_dev_language?c+=a+".js":c+=a+".min.js",cbh_ldr.isLoaded("js",c))return b();cbh_ldr.loadFile("js",c,!0,b)}},{key:"addFilteredMessages",value:function(){var a=this,b=CBHCore.helpers.getEndpointProtocol()+"//"+cbh_ldr.opt.endpoint+"/hunter/get_widget_message_filters/",c=CBHCore.hunter_code,d=CBHCore.lang.langCode,e=CBHCore.helpers.isMobile()?"mobile":"pc";this.filteredMessages={},this.filters=[];var f=function(){return"cbh_widget_msg_filter_"+a.versionName},g=function(c){cbh_ldr.server.ajax({url:b,type:"GET",async:!0,crossDomain:!0,dataType:"json",data:{wcode:c,version:a.version},result:function(b){a.filters=b,CBHCore.storage.save(f(),JSON.stringify(b),"session"),l(k())}})},h=function(b){if(1!==parseInt(b.active,10))return{};var c={};try{c=CBHCore.helpers.isFunction(i[a.versionName])?i[a.versionName](b):i.v2(b)}catch(a){}return c},i={v2:function(a){var b=JSON.parse(a.messages),c=b.widget_messages;for(var d in c)c.hasOwnProperty(d)&&(c[d]=c[d].replace(/([^>])\n/g,"$1<br/>"));return c||{}},v3:function(a){return CBHCore.brand_image=a.brand_image,CBHCore.brand_logo=a.brand_logo,JSON.parse(a.messages).widget_messages||{}},v5:function(a){return CBHCore.brand_image=a.brand_image,CBHCore.brand_logo=a.brand_logo,CBHCore.brand_v5_popup_video=a.brand_v5_popup_video,CBHCore.brand_v5_slider_video=a.brand_v5_slider_video,CBHCore.brand_v5_popup_bg=a.brand_v5_popup_bg,CBHCore.brand_v5_slider_bg=a.brand_v5_slider_bg,CBHCore.brand_v5_button_bg=a.brand_v5_button_bg,void 0!==a.enable_slide&&1===parseInt(a.enable_slide,10)&&(CBHCore.enable_slide=a.enable_slide,CBHCore.slide_image=a.slide_image,CBHCore.slide_text=a.slide_text,CBHCore.slide_timer=a.slide_timer),i.v3(a)},v7:function(a){return CBHCore.catch_avatar=a.catch_avatar,i.v3(a)},v8:function(a){return CBHCore.catch_avatar=a.catch_avatar,i.v5(a)},v9:function(a){return CBHCore.catch_avatar=a.catch_avatar,i.v5(a)},v10:function(a){return CBHCore.catch_avatar=a.catch_avatar,i.v5(a)}},j=function(){a.filteredMessages=function a(b){for(var c in b)b.hasOwnProperty(c)&&("string"!=typeof b[c]?b[c]=a(b[c]):0===b[c].length&&delete b[c]);return b}(a.filteredMessages);var b={};if(b[d]=a.filteredMessages,cbh_ldr.helpers.isMobile()&&a.filteredMessages.mobile){var c=a.filteredMessages.mobile;delete a.filteredMessages.mobile,babelHelpers.extends(a.filteredMessages,c)}return 0!==b[d].length&&b},k=function(){if(0===a.filters.length)return!1;var b={},c=void 0,f=void 0,g=void 0;for(var h in a.filters)if(a.filters.hasOwnProperty(h)){var i=new RegExp(window.location.origin+"/"+function(a){return a.replace(/\?/g,"\\?").replace(/\*/g,".*?")}(a.filters[h].url_pattern)),j=null==decodeURI(window.location.href).match(i)?0:i.toString().length;switch(a.filters[h].lang){case d:c=2e3;break;case"":c=1e3;break;default:c=0}switch(a.filters[h].media){case e:f=2e3;break;case"all":f=1e3;break;default:f=0}g=a.filters[h].version===a.version?2e3:1e3,g&&j&&c&&f&&(b[h]=g+j+c+f)}var k=m(b);return!1!==k&&a.filters[k]},l=function(b){if(b){"1"===b.hide_pill&&(cbh_ldr.hidePill=!0);var c=cbh_ldr.getFiles();if(cbh_ldr.version<10&&b.banner&&""!==b.banner&&!c.disableBanner&&cbh_ldr.helpers.hasSubscription()){var d="//"+cbh_ldr.opt.static_domain+"/widgets/banners/v1/public/banners.min.js";cbh_ldr.isLoaded("js",d)||cbh_ldr.loadFile("js",d,!1),d="//"+cbh_ldr.opt.static_domain+"/widgets/banners/v1/css/style.min.css",cbh_ldr.isLoaded("css",d)||cbh_ldr.loadFile("css",d,!1)}a.filteredMessages=h(b),a.addLang(j()),null!=b.lang_override&&b.lang_override.length>10&&a.addLang(JSON.parse(b.lang_override)),a.filter_id=b.id}},m=function(a){var b=void 0,c=!1,d=0;for(var e in a)a.hasOwnProperty(e)&&(c?a[e]>d&&(d=a[e],b=e):(d=a[e],b=e,c=!0));return!!c&&b};return function(){var b=null;CBHCore.opt.use_storage&&CBHCore.storage.test()&&-1===["8","9","10"].indexOf(a.version)&&(b=CBHCore.storage.get(f(),"session")),b?(a.filters=JSON.parse(b),l(k())):g(c)}()}}]),a}();cbh_ldr.lang=new Lang;var func={dbParamIsEnabled:function(a){return void 0!==a&&parseInt(a,10)>0},debug_mode:function(a){cbh_ldr.opt.dev_mode=void 0!==a&&a.toString()||function(){var a=cbh_ldr.cookies.get("dev_mode");return void 0!==a&&a.toString()}()||cbh_ldr.opt.dev_mode,cbh_ldr.helpers.isBoolean(cbh_ldr.opt.dev_mode)||(cbh_ldr.opt.dev_mode="true"===cbh_ldr.opt.dev_mode||"1"===cbh_ldr.opt.dev_mode)},set_debug_scope:function(a){if(void 0!==a)return void(cbh_ldr.opt.debug_scope=a);var b=cbh_ldr.cookies.get("debug_scope");void 0!==b&&(cbh_ldr.opt.debug_scope=b.toString())},block_country:function(){if(!cbh_ldr.db_params.iso_code)return!1;if("object"!==babelHelpers.typeof(win[cbh_ldr.external_settings_name]))return!1;var a=win[cbh_ldr.external_settings_name];if(!cbh_ldr.helpers.isArray(a.block_country)||!a.block_country.length)return!1;for(var b=0,c=a.block_country.length;b<c;b++)a.block_country[b]=a.block_country[b].toUpperCase();return a.block_country.indexOf(cbh_ldr.db_params.iso_code.toUpperCase())>=0},block_referer_host:function(){if("object"!==babelHelpers.typeof(win[cbh_ldr.external_settings_name]))return!1;var a=win[cbh_ldr.external_settings_name],b="block_referer_host";if(!cbh_ldr.helpers.isArray(a[b])||!a[b].length)return!1;if(1===parseInt(cbh_ldr.cookies.get("hunter_"+b),10))return!0;if(!doc.referrer)return!1;for(var c=/^http(s)?:\/\/(www\.)?/,d=doc.referrer.toLowerCase().replace(c,""),e=0,f=a[b].length;e<f;e++)if(0===d.indexOf(a[b][e].toLowerCase().replace(c,"")))return cbh_ldr.cookies.set("hunter_"+b,1,{expires:""}),!0;return!1}};return cbh_ldr.CBHEvents={widgetMouseOver:function(){},widgetOpened:function(){},widgetClosed:function(){},widgetCallOrdered:function(){},widgetDeferredCallOrdered:function(){}},cbh_ldr}(window,window.document,window.location,function(){return window.document.currentScript||function(){for(var a,b=window.document.getElementsByTagName("script"),c=b.length-1;c>=0;c--)if(b[c].hasAttribute("src")&&(a=b[c].getAttribute("src"),a.indexOf("/cbh.js")>-1||a.indexOf("/cbh-debug.js")>-1))return b[c];return b[b.length-1]}()}(),void 0!==CBHCore||"undefined"!=typeof ClbhObject);